/*! For license information please see poweredup.js.LICENSE.txt */
(()=>{var e={9742:(e,t)=>{"use strict";t.byteLength=function(e){var t=c(e),r=t[0],i=t[1];return 3*(r+i)/4-i},t.toByteArray=function(e){var t,r,o=c(e),s=o[0],a=o[1],u=new n(function(e,t,r){return 3*(t+r)/4-r}(0,s,a)),f=0,l=a>0?s-4:s;for(r=0;r<l;r+=4)t=i[e.charCodeAt(r)]<<18|i[e.charCodeAt(r+1)]<<12|i[e.charCodeAt(r+2)]<<6|i[e.charCodeAt(r+3)],u[f++]=t>>16&255,u[f++]=t>>8&255,u[f++]=255&t;return 2===a&&(t=i[e.charCodeAt(r)]<<2|i[e.charCodeAt(r+1)]>>4,u[f++]=255&t),1===a&&(t=i[e.charCodeAt(r)]<<10|i[e.charCodeAt(r+1)]<<4|i[e.charCodeAt(r+2)]>>2,u[f++]=t>>8&255,u[f++]=255&t),u},t.fromByteArray=function(e){for(var t,i=e.length,n=i%3,o=[],s=16383,a=0,c=i-n;a<c;a+=s)o.push(u(e,a,a+s>c?c:a+s));return 1===n?(t=e[i-1],o.push(r[t>>2]+r[t<<4&63]+"==")):2===n&&(t=(e[i-2]<<8)+e[i-1],o.push(r[t>>10]+r[t>>4&63]+r[t<<2&63]+"=")),o.join("")};for(var r=[],i=[],n="undefined"!=typeof Uint8Array?Uint8Array:Array,o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",s=0,a=o.length;s<a;++s)r[s]=o[s],i[o.charCodeAt(s)]=s;function c(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var r=e.indexOf("=");return-1===r&&(r=t),[r,r===t?0:4-r%4]}function u(e,t,i){for(var n,o,s=[],a=t;a<i;a+=3)n=(e[a]<<16&16711680)+(e[a+1]<<8&65280)+(255&e[a+2]),s.push(r[(o=n)>>18&63]+r[o>>12&63]+r[o>>6&63]+r[63&o]);return s.join("")}i["-".charCodeAt(0)]=62,i["_".charCodeAt(0)]=63},8764:(e,t,r)=>{"use strict";const i=r(9742),n=r(645),o="function"==typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("nodejs.util.inspect.custom"):null;t.Buffer=c,t.SlowBuffer=function(e){return+e!=e&&(e=0),c.alloc(+e)},t.INSPECT_MAX_BYTES=50;const s=2147483647;function a(e){if(e>s)throw new RangeError('The value "'+e+'" is invalid for option "size"');const t=new Uint8Array(e);return Object.setPrototypeOf(t,c.prototype),t}function c(e,t,r){if("number"==typeof e){if("string"==typeof t)throw new TypeError('The "string" argument must be of type string. Received type number');return l(e)}return u(e,t,r)}function u(e,t,r){if("string"==typeof e)return function(e,t){if("string"==typeof t&&""!==t||(t="utf8"),!c.isEncoding(t))throw new TypeError("Unknown encoding: "+t);const r=0|p(e,t);let i=a(r);const n=i.write(e,t);return n!==r&&(i=i.slice(0,n)),i}(e,t);if(ArrayBuffer.isView(e))return function(e){if(q(e,Uint8Array)){const t=new Uint8Array(e);return h(t.buffer,t.byteOffset,t.byteLength)}return _(e)}(e);if(null==e)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e);if(q(e,ArrayBuffer)||e&&q(e.buffer,ArrayBuffer))return h(e,t,r);if("undefined"!=typeof SharedArrayBuffer&&(q(e,SharedArrayBuffer)||e&&q(e.buffer,SharedArrayBuffer)))return h(e,t,r);if("number"==typeof e)throw new TypeError('The "value" argument must not be of type number. Received type number');const i=e.valueOf&&e.valueOf();if(null!=i&&i!==e)return c.from(i,t,r);const n=function(e){if(c.isBuffer(e)){const t=0|d(e.length),r=a(t);return 0===r.length||e.copy(r,0,0,t),r}return void 0!==e.length?"number"!=typeof e.length||X(e.length)?a(0):_(e):"Buffer"===e.type&&Array.isArray(e.data)?_(e.data):void 0}(e);if(n)return n;if("undefined"!=typeof Symbol&&null!=Symbol.toPrimitive&&"function"==typeof e[Symbol.toPrimitive])return c.from(e[Symbol.toPrimitive]("string"),t,r);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e)}function f(e){if("number"!=typeof e)throw new TypeError('"size" argument must be of type number');if(e<0)throw new RangeError('The value "'+e+'" is invalid for option "size"')}function l(e){return f(e),a(e<0?0:0|d(e))}function _(e){const t=e.length<0?0:0|d(e.length),r=a(t);for(let i=0;i<t;i+=1)r[i]=255&e[i];return r}function h(e,t,r){if(t<0||e.byteLength<t)throw new RangeError('"offset" is outside of buffer bounds');if(e.byteLength<t+(r||0))throw new RangeError('"length" is outside of buffer bounds');let i;return i=void 0===t&&void 0===r?new Uint8Array(e):void 0===r?new Uint8Array(e,t):new Uint8Array(e,t,r),Object.setPrototypeOf(i,c.prototype),i}function d(e){if(e>=s)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+s.toString(16)+" bytes");return 0|e}function p(e,t){if(c.isBuffer(e))return e.length;if(ArrayBuffer.isView(e)||q(e,ArrayBuffer))return e.byteLength;if("string"!=typeof e)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof e);const r=e.length,i=arguments.length>2&&!0===arguments[2];if(!i&&0===r)return 0;let n=!1;for(;;)switch(t){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":return $(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*r;case"hex":return r>>>1;case"base64":return K(e).length;default:if(n)return i?-1:$(e).length;t=(""+t).toLowerCase(),n=!0}}function E(e,t,r){let i=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===r||r>this.length)&&(r=this.length),r<=0)return"";if((r>>>=0)<=(t>>>=0))return"";for(e||(e="utf8");;)switch(e){case"hex":return g(this,t,r);case"utf8":case"utf-8":return A(this,t,r);case"ascii":return L(this,t,r);case"latin1":case"binary":return D(this,t,r);case"base64":return S(this,t,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return C(this,t,r);default:if(i)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),i=!0}}function O(e,t,r){const i=e[t];e[t]=e[r],e[r]=i}function T(e,t,r,i,n){if(0===e.length)return-1;if("string"==typeof r?(i=r,r=0):r>2147483647?r=2147483647:r<-2147483648&&(r=-2147483648),X(r=+r)&&(r=n?0:e.length-1),r<0&&(r=e.length+r),r>=e.length){if(n)return-1;r=e.length-1}else if(r<0){if(!n)return-1;r=0}if("string"==typeof t&&(t=c.from(t,i)),c.isBuffer(t))return 0===t.length?-1:b(e,t,r,i,n);if("number"==typeof t)return t&=255,"function"==typeof Uint8Array.prototype.indexOf?n?Uint8Array.prototype.indexOf.call(e,t,r):Uint8Array.prototype.lastIndexOf.call(e,t,r):b(e,[t],r,i,n);throw new TypeError("val must be string, number or Buffer")}function b(e,t,r,i,n){let o,s=1,a=e.length,c=t.length;if(void 0!==i&&("ucs2"===(i=String(i).toLowerCase())||"ucs-2"===i||"utf16le"===i||"utf-16le"===i)){if(e.length<2||t.length<2)return-1;s=2,a/=2,c/=2,r/=2}function u(e,t){return 1===s?e[t]:e.readUInt16BE(t*s)}if(n){let i=-1;for(o=r;o<a;o++)if(u(e,o)===u(t,-1===i?0:o-i)){if(-1===i&&(i=o),o-i+1===c)return i*s}else-1!==i&&(o-=o-i),i=-1}else for(r+c>a&&(r=a-c),o=r;o>=0;o--){let r=!0;for(let i=0;i<c;i++)if(u(e,o+i)!==u(t,i)){r=!1;break}if(r)return o}return-1}function M(e,t,r,i){r=Number(r)||0;const n=e.length-r;i?(i=Number(i))>n&&(i=n):i=n;const o=t.length;let s;for(i>o/2&&(i=o/2),s=0;s<i;++s){const i=parseInt(t.substr(2*s,2),16);if(X(i))return s;e[r+s]=i}return s}function v(e,t,r,i){return z($(t,e.length-r),e,r,i)}function y(e,t,r,i){return z(function(e){const t=[];for(let r=0;r<e.length;++r)t.push(255&e.charCodeAt(r));return t}(t),e,r,i)}function R(e,t,r,i){return z(K(t),e,r,i)}function m(e,t,r,i){return z(function(e,t){let r,i,n;const o=[];for(let s=0;s<e.length&&!((t-=2)<0);++s)r=e.charCodeAt(s),i=r>>8,n=r%256,o.push(n),o.push(i);return o}(t,e.length-r),e,r,i)}function S(e,t,r){return 0===t&&r===e.length?i.fromByteArray(e):i.fromByteArray(e.slice(t,r))}function A(e,t,r){r=Math.min(e.length,r);const i=[];let n=t;for(;n<r;){const t=e[n];let o=null,s=t>239?4:t>223?3:t>191?2:1;if(n+s<=r){let r,i,a,c;switch(s){case 1:t<128&&(o=t);break;case 2:r=e[n+1],128==(192&r)&&(c=(31&t)<<6|63&r,c>127&&(o=c));break;case 3:r=e[n+1],i=e[n+2],128==(192&r)&&128==(192&i)&&(c=(15&t)<<12|(63&r)<<6|63&i,c>2047&&(c<55296||c>57343)&&(o=c));break;case 4:r=e[n+1],i=e[n+2],a=e[n+3],128==(192&r)&&128==(192&i)&&128==(192&a)&&(c=(15&t)<<18|(63&r)<<12|(63&i)<<6|63&a,c>65535&&c<1114112&&(o=c))}}null===o?(o=65533,s=1):o>65535&&(o-=65536,i.push(o>>>10&1023|55296),o=56320|1023&o),i.push(o),n+=s}return function(e){const t=e.length;if(t<=I)return String.fromCharCode.apply(String,e);let r="",i=0;for(;i<t;)r+=String.fromCharCode.apply(String,e.slice(i,i+=I));return r}(i)}t.kMaxLength=s,c.TYPED_ARRAY_SUPPORT=function(){try{const e=new Uint8Array(1),t={foo:function(){return 42}};return Object.setPrototypeOf(t,Uint8Array.prototype),Object.setPrototypeOf(e,t),42===e.foo()}catch(e){return!1}}(),c.TYPED_ARRAY_SUPPORT||"undefined"==typeof console||"function"!=typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(c.prototype,"parent",{enumerable:!0,get:function(){if(c.isBuffer(this))return this.buffer}}),Object.defineProperty(c.prototype,"offset",{enumerable:!0,get:function(){if(c.isBuffer(this))return this.byteOffset}}),c.poolSize=8192,c.from=function(e,t,r){return u(e,t,r)},Object.setPrototypeOf(c.prototype,Uint8Array.prototype),Object.setPrototypeOf(c,Uint8Array),c.alloc=function(e,t,r){return function(e,t,r){return f(e),e<=0?a(e):void 0!==t?"string"==typeof r?a(e).fill(t,r):a(e).fill(t):a(e)}(e,t,r)},c.allocUnsafe=function(e){return l(e)},c.allocUnsafeSlow=function(e){return l(e)},c.isBuffer=function(e){return null!=e&&!0===e._isBuffer&&e!==c.prototype},c.compare=function(e,t){if(q(e,Uint8Array)&&(e=c.from(e,e.offset,e.byteLength)),q(t,Uint8Array)&&(t=c.from(t,t.offset,t.byteLength)),!c.isBuffer(e)||!c.isBuffer(t))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(e===t)return 0;let r=e.length,i=t.length;for(let n=0,o=Math.min(r,i);n<o;++n)if(e[n]!==t[n]){r=e[n],i=t[n];break}return r<i?-1:i<r?1:0},c.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},c.concat=function(e,t){if(!Array.isArray(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return c.alloc(0);let r;if(void 0===t)for(t=0,r=0;r<e.length;++r)t+=e[r].length;const i=c.allocUnsafe(t);let n=0;for(r=0;r<e.length;++r){let t=e[r];if(q(t,Uint8Array))n+t.length>i.length?(c.isBuffer(t)||(t=c.from(t)),t.copy(i,n)):Uint8Array.prototype.set.call(i,t,n);else{if(!c.isBuffer(t))throw new TypeError('"list" argument must be an Array of Buffers');t.copy(i,n)}n+=t.length}return i},c.byteLength=p,c.prototype._isBuffer=!0,c.prototype.swap16=function(){const e=this.length;if(e%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let t=0;t<e;t+=2)O(this,t,t+1);return this},c.prototype.swap32=function(){const e=this.length;if(e%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let t=0;t<e;t+=4)O(this,t,t+3),O(this,t+1,t+2);return this},c.prototype.swap64=function(){const e=this.length;if(e%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let t=0;t<e;t+=8)O(this,t,t+7),O(this,t+1,t+6),O(this,t+2,t+5),O(this,t+3,t+4);return this},c.prototype.toString=function(){const e=this.length;return 0===e?"":0===arguments.length?A(this,0,e):E.apply(this,arguments)},c.prototype.toLocaleString=c.prototype.toString,c.prototype.equals=function(e){if(!c.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===c.compare(this,e)},c.prototype.inspect=function(){let e="";const r=t.INSPECT_MAX_BYTES;return e=this.toString("hex",0,r).replace(/(.{2})/g,"$1 ").trim(),this.length>r&&(e+=" ... "),"<Buffer "+e+">"},o&&(c.prototype[o]=c.prototype.inspect),c.prototype.compare=function(e,t,r,i,n){if(q(e,Uint8Array)&&(e=c.from(e,e.offset,e.byteLength)),!c.isBuffer(e))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof e);if(void 0===t&&(t=0),void 0===r&&(r=e?e.length:0),void 0===i&&(i=0),void 0===n&&(n=this.length),t<0||r>e.length||i<0||n>this.length)throw new RangeError("out of range index");if(i>=n&&t>=r)return 0;if(i>=n)return-1;if(t>=r)return 1;if(this===e)return 0;let o=(n>>>=0)-(i>>>=0),s=(r>>>=0)-(t>>>=0);const a=Math.min(o,s),u=this.slice(i,n),f=e.slice(t,r);for(let e=0;e<a;++e)if(u[e]!==f[e]){o=u[e],s=f[e];break}return o<s?-1:s<o?1:0},c.prototype.includes=function(e,t,r){return-1!==this.indexOf(e,t,r)},c.prototype.indexOf=function(e,t,r){return T(this,e,t,r,!0)},c.prototype.lastIndexOf=function(e,t,r){return T(this,e,t,r,!1)},c.prototype.write=function(e,t,r,i){if(void 0===t)i="utf8",r=this.length,t=0;else if(void 0===r&&"string"==typeof t)i=t,r=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t>>>=0,isFinite(r)?(r>>>=0,void 0===i&&(i="utf8")):(i=r,r=void 0)}const n=this.length-t;if((void 0===r||r>n)&&(r=n),e.length>0&&(r<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");i||(i="utf8");let o=!1;for(;;)switch(i){case"hex":return M(this,e,t,r);case"utf8":case"utf-8":return v(this,e,t,r);case"ascii":case"latin1":case"binary":return y(this,e,t,r);case"base64":return R(this,e,t,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return m(this,e,t,r);default:if(o)throw new TypeError("Unknown encoding: "+i);i=(""+i).toLowerCase(),o=!0}},c.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};const I=4096;function L(e,t,r){let i="";r=Math.min(e.length,r);for(let n=t;n<r;++n)i+=String.fromCharCode(127&e[n]);return i}function D(e,t,r){let i="";r=Math.min(e.length,r);for(let n=t;n<r;++n)i+=String.fromCharCode(e[n]);return i}function g(e,t,r){const i=e.length;(!t||t<0)&&(t=0),(!r||r<0||r>i)&&(r=i);let n="";for(let i=t;i<r;++i)n+=Z[e[i]];return n}function C(e,t,r){const i=e.slice(t,r);let n="";for(let e=0;e<i.length-1;e+=2)n+=String.fromCharCode(i[e]+256*i[e+1]);return n}function N(e,t,r){if(e%1!=0||e<0)throw new RangeError("offset is not uint");if(e+t>r)throw new RangeError("Trying to access beyond buffer length")}function P(e,t,r,i,n,o){if(!c.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>n||t<o)throw new RangeError('"value" argument is out of bounds');if(r+i>e.length)throw new RangeError("Index out of range")}function B(e,t,r,i,n){x(t,i,n,e,r,7);let o=Number(t&BigInt(4294967295));e[r++]=o,o>>=8,e[r++]=o,o>>=8,e[r++]=o,o>>=8,e[r++]=o;let s=Number(t>>BigInt(32)&BigInt(4294967295));return e[r++]=s,s>>=8,e[r++]=s,s>>=8,e[r++]=s,s>>=8,e[r++]=s,r}function U(e,t,r,i,n){x(t,i,n,e,r,7);let o=Number(t&BigInt(4294967295));e[r+7]=o,o>>=8,e[r+6]=o,o>>=8,e[r+5]=o,o>>=8,e[r+4]=o;let s=Number(t>>BigInt(32)&BigInt(4294967295));return e[r+3]=s,s>>=8,e[r+2]=s,s>>=8,e[r+1]=s,s>>=8,e[r]=s,r+8}function w(e,t,r,i,n,o){if(r+i>e.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("Index out of range")}function H(e,t,r,i,o){return t=+t,r>>>=0,o||w(e,0,r,4),n.write(e,t,r,i,23,4),r+4}function F(e,t,r,i,o){return t=+t,r>>>=0,o||w(e,0,r,8),n.write(e,t,r,i,52,8),r+8}c.prototype.slice=function(e,t){const r=this.length;(e=~~e)<0?(e+=r)<0&&(e=0):e>r&&(e=r),(t=void 0===t?r:~~t)<0?(t+=r)<0&&(t=0):t>r&&(t=r),t<e&&(t=e);const i=this.subarray(e,t);return Object.setPrototypeOf(i,c.prototype),i},c.prototype.readUintLE=c.prototype.readUIntLE=function(e,t,r){e>>>=0,t>>>=0,r||N(e,t,this.length);let i=this[e],n=1,o=0;for(;++o<t&&(n*=256);)i+=this[e+o]*n;return i},c.prototype.readUintBE=c.prototype.readUIntBE=function(e,t,r){e>>>=0,t>>>=0,r||N(e,t,this.length);let i=this[e+--t],n=1;for(;t>0&&(n*=256);)i+=this[e+--t]*n;return i},c.prototype.readUint8=c.prototype.readUInt8=function(e,t){return e>>>=0,t||N(e,1,this.length),this[e]},c.prototype.readUint16LE=c.prototype.readUInt16LE=function(e,t){return e>>>=0,t||N(e,2,this.length),this[e]|this[e+1]<<8},c.prototype.readUint16BE=c.prototype.readUInt16BE=function(e,t){return e>>>=0,t||N(e,2,this.length),this[e]<<8|this[e+1]},c.prototype.readUint32LE=c.prototype.readUInt32LE=function(e,t){return e>>>=0,t||N(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},c.prototype.readUint32BE=c.prototype.readUInt32BE=function(e,t){return e>>>=0,t||N(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},c.prototype.readBigUInt64LE=Q((function(e){V(e>>>=0,"offset");const t=this[e],r=this[e+7];void 0!==t&&void 0!==r||Y(e,this.length-8);const i=t+256*this[++e]+65536*this[++e]+this[++e]*2**24,n=this[++e]+256*this[++e]+65536*this[++e]+r*2**24;return BigInt(i)+(BigInt(n)<<BigInt(32))})),c.prototype.readBigUInt64BE=Q((function(e){V(e>>>=0,"offset");const t=this[e],r=this[e+7];void 0!==t&&void 0!==r||Y(e,this.length-8);const i=t*2**24+65536*this[++e]+256*this[++e]+this[++e],n=this[++e]*2**24+65536*this[++e]+256*this[++e]+r;return(BigInt(i)<<BigInt(32))+BigInt(n)})),c.prototype.readIntLE=function(e,t,r){e>>>=0,t>>>=0,r||N(e,t,this.length);let i=this[e],n=1,o=0;for(;++o<t&&(n*=256);)i+=this[e+o]*n;return n*=128,i>=n&&(i-=Math.pow(2,8*t)),i},c.prototype.readIntBE=function(e,t,r){e>>>=0,t>>>=0,r||N(e,t,this.length);let i=t,n=1,o=this[e+--i];for(;i>0&&(n*=256);)o+=this[e+--i]*n;return n*=128,o>=n&&(o-=Math.pow(2,8*t)),o},c.prototype.readInt8=function(e,t){return e>>>=0,t||N(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},c.prototype.readInt16LE=function(e,t){e>>>=0,t||N(e,2,this.length);const r=this[e]|this[e+1]<<8;return 32768&r?4294901760|r:r},c.prototype.readInt16BE=function(e,t){e>>>=0,t||N(e,2,this.length);const r=this[e+1]|this[e]<<8;return 32768&r?4294901760|r:r},c.prototype.readInt32LE=function(e,t){return e>>>=0,t||N(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},c.prototype.readInt32BE=function(e,t){return e>>>=0,t||N(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},c.prototype.readBigInt64LE=Q((function(e){V(e>>>=0,"offset");const t=this[e],r=this[e+7];void 0!==t&&void 0!==r||Y(e,this.length-8);const i=this[e+4]+256*this[e+5]+65536*this[e+6]+(r<<24);return(BigInt(i)<<BigInt(32))+BigInt(t+256*this[++e]+65536*this[++e]+this[++e]*2**24)})),c.prototype.readBigInt64BE=Q((function(e){V(e>>>=0,"offset");const t=this[e],r=this[e+7];void 0!==t&&void 0!==r||Y(e,this.length-8);const i=(t<<24)+65536*this[++e]+256*this[++e]+this[++e];return(BigInt(i)<<BigInt(32))+BigInt(this[++e]*2**24+65536*this[++e]+256*this[++e]+r)})),c.prototype.readFloatLE=function(e,t){return e>>>=0,t||N(e,4,this.length),n.read(this,e,!0,23,4)},c.prototype.readFloatBE=function(e,t){return e>>>=0,t||N(e,4,this.length),n.read(this,e,!1,23,4)},c.prototype.readDoubleLE=function(e,t){return e>>>=0,t||N(e,8,this.length),n.read(this,e,!0,52,8)},c.prototype.readDoubleBE=function(e,t){return e>>>=0,t||N(e,8,this.length),n.read(this,e,!1,52,8)},c.prototype.writeUintLE=c.prototype.writeUIntLE=function(e,t,r,i){e=+e,t>>>=0,r>>>=0,i||P(this,e,t,r,Math.pow(2,8*r)-1,0);let n=1,o=0;for(this[t]=255&e;++o<r&&(n*=256);)this[t+o]=e/n&255;return t+r},c.prototype.writeUintBE=c.prototype.writeUIntBE=function(e,t,r,i){e=+e,t>>>=0,r>>>=0,i||P(this,e,t,r,Math.pow(2,8*r)-1,0);let n=r-1,o=1;for(this[t+n]=255&e;--n>=0&&(o*=256);)this[t+n]=e/o&255;return t+r},c.prototype.writeUint8=c.prototype.writeUInt8=function(e,t,r){return e=+e,t>>>=0,r||P(this,e,t,1,255,0),this[t]=255&e,t+1},c.prototype.writeUint16LE=c.prototype.writeUInt16LE=function(e,t,r){return e=+e,t>>>=0,r||P(this,e,t,2,65535,0),this[t]=255&e,this[t+1]=e>>>8,t+2},c.prototype.writeUint16BE=c.prototype.writeUInt16BE=function(e,t,r){return e=+e,t>>>=0,r||P(this,e,t,2,65535,0),this[t]=e>>>8,this[t+1]=255&e,t+2},c.prototype.writeUint32LE=c.prototype.writeUInt32LE=function(e,t,r){return e=+e,t>>>=0,r||P(this,e,t,4,4294967295,0),this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e,t+4},c.prototype.writeUint32BE=c.prototype.writeUInt32BE=function(e,t,r){return e=+e,t>>>=0,r||P(this,e,t,4,4294967295,0),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},c.prototype.writeBigUInt64LE=Q((function(e,t=0){return B(this,e,t,BigInt(0),BigInt("0xffffffffffffffff"))})),c.prototype.writeBigUInt64BE=Q((function(e,t=0){return U(this,e,t,BigInt(0),BigInt("0xffffffffffffffff"))})),c.prototype.writeIntLE=function(e,t,r,i){if(e=+e,t>>>=0,!i){const i=Math.pow(2,8*r-1);P(this,e,t,r,i-1,-i)}let n=0,o=1,s=0;for(this[t]=255&e;++n<r&&(o*=256);)e<0&&0===s&&0!==this[t+n-1]&&(s=1),this[t+n]=(e/o>>0)-s&255;return t+r},c.prototype.writeIntBE=function(e,t,r,i){if(e=+e,t>>>=0,!i){const i=Math.pow(2,8*r-1);P(this,e,t,r,i-1,-i)}let n=r-1,o=1,s=0;for(this[t+n]=255&e;--n>=0&&(o*=256);)e<0&&0===s&&0!==this[t+n+1]&&(s=1),this[t+n]=(e/o>>0)-s&255;return t+r},c.prototype.writeInt8=function(e,t,r){return e=+e,t>>>=0,r||P(this,e,t,1,127,-128),e<0&&(e=255+e+1),this[t]=255&e,t+1},c.prototype.writeInt16LE=function(e,t,r){return e=+e,t>>>=0,r||P(this,e,t,2,32767,-32768),this[t]=255&e,this[t+1]=e>>>8,t+2},c.prototype.writeInt16BE=function(e,t,r){return e=+e,t>>>=0,r||P(this,e,t,2,32767,-32768),this[t]=e>>>8,this[t+1]=255&e,t+2},c.prototype.writeInt32LE=function(e,t,r){return e=+e,t>>>=0,r||P(this,e,t,4,2147483647,-2147483648),this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24,t+4},c.prototype.writeInt32BE=function(e,t,r){return e=+e,t>>>=0,r||P(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},c.prototype.writeBigInt64LE=Q((function(e,t=0){return B(this,e,t,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))})),c.prototype.writeBigInt64BE=Q((function(e,t=0){return U(this,e,t,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))})),c.prototype.writeFloatLE=function(e,t,r){return H(this,e,t,!0,r)},c.prototype.writeFloatBE=function(e,t,r){return H(this,e,t,!1,r)},c.prototype.writeDoubleLE=function(e,t,r){return F(this,e,t,!0,r)},c.prototype.writeDoubleBE=function(e,t,r){return F(this,e,t,!1,r)},c.prototype.copy=function(e,t,r,i){if(!c.isBuffer(e))throw new TypeError("argument should be a Buffer");if(r||(r=0),i||0===i||(i=this.length),t>=e.length&&(t=e.length),t||(t=0),i>0&&i<r&&(i=r),i===r)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(r<0||r>=this.length)throw new RangeError("Index out of range");if(i<0)throw new RangeError("sourceEnd out of bounds");i>this.length&&(i=this.length),e.length-t<i-r&&(i=e.length-t+r);const n=i-r;return this===e&&"function"==typeof Uint8Array.prototype.copyWithin?this.copyWithin(t,r,i):Uint8Array.prototype.set.call(e,this.subarray(r,i),t),n},c.prototype.fill=function(e,t,r,i){if("string"==typeof e){if("string"==typeof t?(i=t,t=0,r=this.length):"string"==typeof r&&(i=r,r=this.length),void 0!==i&&"string"!=typeof i)throw new TypeError("encoding must be a string");if("string"==typeof i&&!c.isEncoding(i))throw new TypeError("Unknown encoding: "+i);if(1===e.length){const t=e.charCodeAt(0);("utf8"===i&&t<128||"latin1"===i)&&(e=t)}}else"number"==typeof e?e&=255:"boolean"==typeof e&&(e=Number(e));if(t<0||this.length<t||this.length<r)throw new RangeError("Out of range index");if(r<=t)return this;let n;if(t>>>=0,r=void 0===r?this.length:r>>>0,e||(e=0),"number"==typeof e)for(n=t;n<r;++n)this[n]=e;else{const o=c.isBuffer(e)?e:c.from(e,i),s=o.length;if(0===s)throw new TypeError('The value "'+e+'" is invalid for argument "value"');for(n=0;n<r-t;++n)this[n+t]=o[n%s]}return this};const j={};function W(e,t,r){j[e]=class extends r{constructor(){super(),Object.defineProperty(this,"message",{value:t.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${e}]`,this.stack,delete this.name}get code(){return e}set code(e){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:e,writable:!0})}toString(){return`${this.name} [${e}]: ${this.message}`}}}function G(e){let t="",r=e.length;const i="-"===e[0]?1:0;for(;r>=i+4;r-=3)t=`_${e.slice(r-3,r)}${t}`;return`${e.slice(0,r)}${t}`}function x(e,t,r,i,n,o){if(e>r||e<t){const i="bigint"==typeof t?"n":"";let n;throw n=o>3?0===t||t===BigInt(0)?`>= 0${i} and < 2${i} ** ${8*(o+1)}${i}`:`>= -(2${i} ** ${8*(o+1)-1}${i}) and < 2 ** ${8*(o+1)-1}${i}`:`>= ${t}${i} and <= ${r}${i}`,new j.ERR_OUT_OF_RANGE("value",n,e)}!function(e,t,r){V(t,"offset"),void 0!==e[t]&&void 0!==e[t+r]||Y(t,e.length-(r+1))}(i,n,o)}function V(e,t){if("number"!=typeof e)throw new j.ERR_INVALID_ARG_TYPE(t,"number",e)}function Y(e,t,r){if(Math.floor(e)!==e)throw V(e,r),new j.ERR_OUT_OF_RANGE(r||"offset","an integer",e);if(t<0)throw new j.ERR_BUFFER_OUT_OF_BOUNDS;throw new j.ERR_OUT_OF_RANGE(r||"offset",`>= ${r?1:0} and <= ${t}`,e)}W("ERR_BUFFER_OUT_OF_BOUNDS",(function(e){return e?`${e} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"}),RangeError),W("ERR_INVALID_ARG_TYPE",(function(e,t){return`The "${e}" argument must be of type number. Received type ${typeof t}`}),TypeError),W("ERR_OUT_OF_RANGE",(function(e,t,r){let i=`The value of "${e}" is out of range.`,n=r;return Number.isInteger(r)&&Math.abs(r)>2**32?n=G(String(r)):"bigint"==typeof r&&(n=String(r),(r>BigInt(2)**BigInt(32)||r<-(BigInt(2)**BigInt(32)))&&(n=G(n)),n+="n"),i+=` It must be ${t}. Received ${n}`,i}),RangeError);const k=/[^+/0-9A-Za-z-_]/g;function $(e,t){let r;t=t||1/0;const i=e.length;let n=null;const o=[];for(let s=0;s<i;++s){if(r=e.charCodeAt(s),r>55295&&r<57344){if(!n){if(r>56319){(t-=3)>-1&&o.push(239,191,189);continue}if(s+1===i){(t-=3)>-1&&o.push(239,191,189);continue}n=r;continue}if(r<56320){(t-=3)>-1&&o.push(239,191,189),n=r;continue}r=65536+(n-55296<<10|r-56320)}else n&&(t-=3)>-1&&o.push(239,191,189);if(n=null,r<128){if((t-=1)<0)break;o.push(r)}else if(r<2048){if((t-=2)<0)break;o.push(r>>6|192,63&r|128)}else if(r<65536){if((t-=3)<0)break;o.push(r>>12|224,r>>6&63|128,63&r|128)}else{if(!(r<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;o.push(r>>18|240,r>>12&63|128,r>>6&63|128,63&r|128)}}return o}function K(e){return i.toByteArray(function(e){if((e=(e=e.split("=")[0]).trim().replace(k,"")).length<2)return"";for(;e.length%4!=0;)e+="=";return e}(e))}function z(e,t,r,i){let n;for(n=0;n<i&&!(n+r>=t.length||n>=e.length);++n)t[n+r]=e[n];return n}function q(e,t){return e instanceof t||null!=e&&null!=e.constructor&&null!=e.constructor.name&&e.constructor.name===t.name}function X(e){return e!=e}const Z=function(){const e="0123456789abcdef",t=new Array(256);for(let r=0;r<16;++r){const i=16*r;for(let n=0;n<16;++n)t[i+n]=e[r]+e[n]}return t}();function Q(e){return"undefined"==typeof BigInt?J:e}function J(){throw new Error("BigInt not supported")}},4247:function(e,t){var r,i;void 0===(i="function"==typeof(r=function(){var e=/^v?(?:\d+)(\.(?:[x*]|\d+)(\.(?:[x*]|\d+)(\.(?:[x*]|\d+))?(?:-[\da-z\-]+(?:\.[\da-z\-]+)*)?(?:\+[\da-z\-]+(?:\.[\da-z\-]+)*)?)?)?$/i;function t(e){var t,r,i=e.replace(/^v/,"").replace(/\+.*$/,""),n=(r="-",-1===(t=i).indexOf(r)?t.length:t.indexOf(r)),o=i.substring(0,n).split(".");return o.push(i.substring(n+1)),o}function r(e){return isNaN(Number(e))?e:Number(e)}function i(t){if("string"!=typeof t)throw new TypeError("Invalid argument expected string");if(!e.test(t))throw new Error("Invalid argument not valid semver ('"+t+"' received)")}function n(e,n){[e,n].forEach(i);for(var o=t(e),s=t(n),a=0;a<Math.max(o.length-1,s.length-1);a++){var c=parseInt(o[a]||0,10),u=parseInt(s[a]||0,10);if(c>u)return 1;if(u>c)return-1}var f=o[o.length-1],l=s[s.length-1];if(f&&l){var _=f.split(".").map(r),h=l.split(".").map(r);for(a=0;a<Math.max(_.length,h.length);a++){if(void 0===_[a]||"string"==typeof h[a]&&"number"==typeof _[a])return-1;if(void 0===h[a]||"string"==typeof _[a]&&"number"==typeof h[a])return 1;if(_[a]>h[a])return 1;if(h[a]>_[a])return-1}}else if(f||l)return f?-1:1;return 0}var o=[">",">=","=","<","<="],s={">":[1],">=":[0,1],"=":[0],"<=":[-1,0],"<":[-1]};return n.validate=function(t){return"string"==typeof t&&e.test(t)},n.compare=function(e,t,r){!function(e){if("string"!=typeof e)throw new TypeError("Invalid operator type, expected string but got "+typeof e);if(-1===o.indexOf(e))throw new TypeError("Invalid operator, expected one of "+o.join("|"))}(r);var i=n(e,t);return s[r].indexOf(i)>-1},n})?r.apply(t,[]):r)||(e.exports=i)},1227:(e,t,r)=>{t.formatArgs=function(t){if(t[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+t[0]+(this.useColors?"%c ":" ")+"+"+e.exports.humanize(this.diff),!this.useColors)return;const r="color: "+this.color;t.splice(1,0,r,"color: inherit");let i=0,n=0;t[0].replace(/%[a-zA-Z%]/g,(e=>{"%%"!==e&&(i++,"%c"===e&&(n=i))})),t.splice(n,0,r)},t.save=function(e){try{e?t.storage.setItem("debug",e):t.storage.removeItem("debug")}catch(e){}},t.load=function(){let e;try{e=t.storage.getItem("debug")}catch(e){}return!e&&"undefined"!=typeof process&&"env"in process&&(e=process.env.DEBUG),e},t.useColors=function(){return!("undefined"==typeof window||!window.process||"renderer"!==window.process.type&&!window.process.__nwjs)||("undefined"==typeof navigator||!navigator.userAgent||!navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))&&("undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/))},t.storage=function(){try{return localStorage}catch(e){}}(),t.destroy=(()=>{let e=!1;return()=>{e||(e=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),t.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],t.log=console.debug||console.log||(()=>{}),e.exports=r(2447)(t);const{formatters:i}=e.exports;i.j=function(e){try{return JSON.stringify(e)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}}},2447:(e,t,r)=>{e.exports=function(e){function t(e){let r,n=null;function o(...e){if(!o.enabled)return;const i=o,n=Number(new Date),s=n-(r||n);i.diff=s,i.prev=r,i.curr=n,r=n,e[0]=t.coerce(e[0]),"string"!=typeof e[0]&&e.unshift("%O");let a=0;e[0]=e[0].replace(/%([a-zA-Z%])/g,((r,n)=>{if("%%"===r)return"%";a++;const o=t.formatters[n];if("function"==typeof o){const t=e[a];r=o.call(i,t),e.splice(a,1),a--}return r})),t.formatArgs.call(i,e),(i.log||t.log).apply(i,e)}return o.namespace=e,o.useColors=t.useColors(),o.color=t.selectColor(e),o.extend=i,o.destroy=t.destroy,Object.defineProperty(o,"enabled",{enumerable:!0,configurable:!1,get:()=>null===n?t.enabled(e):n,set:e=>{n=e}}),"function"==typeof t.init&&t.init(o),o}function i(e,r){const i=t(this.namespace+(void 0===r?":":r)+e);return i.log=this.log,i}function n(e){return e.toString().substring(2,e.toString().length-2).replace(/\.\*\?$/,"*")}return t.debug=t,t.default=t,t.coerce=function(e){return e instanceof Error?e.stack||e.message:e},t.disable=function(){const e=[...t.names.map(n),...t.skips.map(n).map((e=>"-"+e))].join(",");return t.enable(""),e},t.enable=function(e){let r;t.save(e),t.names=[],t.skips=[];const i=("string"==typeof e?e:"").split(/[\s,]+/),n=i.length;for(r=0;r<n;r++)i[r]&&("-"===(e=i[r].replace(/\*/g,".*?"))[0]?t.skips.push(new RegExp("^"+e.substr(1)+"$")):t.names.push(new RegExp("^"+e+"$")))},t.enabled=function(e){if("*"===e[e.length-1])return!0;let r,i;for(r=0,i=t.skips.length;r<i;r++)if(t.skips[r].test(e))return!1;for(r=0,i=t.names.length;r<i;r++)if(t.names[r].test(e))return!0;return!1},t.humanize=r(7824),t.destroy=function(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")},Object.keys(e).forEach((r=>{t[r]=e[r]})),t.names=[],t.skips=[],t.formatters={},t.selectColor=function(e){let r=0;for(let t=0;t<e.length;t++)r=(r<<5)-r+e.charCodeAt(t),r|=0;return t.colors[Math.abs(r)%t.colors.length]},t.enable(t.load()),t}},7187:e=>{"use strict";var t,r="object"==typeof Reflect?Reflect:null,i=r&&"function"==typeof r.apply?r.apply:function(e,t,r){return Function.prototype.apply.call(e,t,r)};t=r&&"function"==typeof r.ownKeys?r.ownKeys:Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:function(e){return Object.getOwnPropertyNames(e)};var n=Number.isNaN||function(e){return e!=e};function o(){o.init.call(this)}e.exports=o,e.exports.once=function(e,t){return new Promise((function(r,i){function n(){void 0!==o&&e.removeListener("error",o),r([].slice.call(arguments))}var o;"error"!==t&&(o=function(r){e.removeListener(t,n),i(r)},e.once("error",o)),e.once(t,n)}))},o.EventEmitter=o,o.prototype._events=void 0,o.prototype._eventsCount=0,o.prototype._maxListeners=void 0;var s=10;function a(e){if("function"!=typeof e)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof e)}function c(e){return void 0===e._maxListeners?o.defaultMaxListeners:e._maxListeners}function u(e,t,r,i){var n,o,s,u;if(a(r),void 0===(o=e._events)?(o=e._events=Object.create(null),e._eventsCount=0):(void 0!==o.newListener&&(e.emit("newListener",t,r.listener?r.listener:r),o=e._events),s=o[t]),void 0===s)s=o[t]=r,++e._eventsCount;else if("function"==typeof s?s=o[t]=i?[r,s]:[s,r]:i?s.unshift(r):s.push(r),(n=c(e))>0&&s.length>n&&!s.warned){s.warned=!0;var f=new Error("Possible EventEmitter memory leak detected. "+s.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit");f.name="MaxListenersExceededWarning",f.emitter=e,f.type=t,f.count=s.length,u=f,console&&console.warn&&console.warn(u)}return e}function f(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function l(e,t,r){var i={fired:!1,wrapFn:void 0,target:e,type:t,listener:r},n=f.bind(i);return n.listener=r,i.wrapFn=n,n}function _(e,t,r){var i=e._events;if(void 0===i)return[];var n=i[t];return void 0===n?[]:"function"==typeof n?r?[n.listener||n]:[n]:r?function(e){for(var t=new Array(e.length),r=0;r<t.length;++r)t[r]=e[r].listener||e[r];return t}(n):d(n,n.length)}function h(e){var t=this._events;if(void 0!==t){var r=t[e];if("function"==typeof r)return 1;if(void 0!==r)return r.length}return 0}function d(e,t){for(var r=new Array(t),i=0;i<t;++i)r[i]=e[i];return r}Object.defineProperty(o,"defaultMaxListeners",{enumerable:!0,get:function(){return s},set:function(e){if("number"!=typeof e||e<0||n(e))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");s=e}}),o.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},o.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||n(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this},o.prototype.getMaxListeners=function(){return c(this)},o.prototype.emit=function(e){for(var t=[],r=1;r<arguments.length;r++)t.push(arguments[r]);var n="error"===e,o=this._events;if(void 0!==o)n=n&&void 0===o.error;else if(!n)return!1;if(n){var s;if(t.length>0&&(s=t[0]),s instanceof Error)throw s;var a=new Error("Unhandled error."+(s?" ("+s.message+")":""));throw a.context=s,a}var c=o[e];if(void 0===c)return!1;if("function"==typeof c)i(c,this,t);else{var u=c.length,f=d(c,u);for(r=0;r<u;++r)i(f[r],this,t)}return!0},o.prototype.addListener=function(e,t){return u(this,e,t,!1)},o.prototype.on=o.prototype.addListener,o.prototype.prependListener=function(e,t){return u(this,e,t,!0)},o.prototype.once=function(e,t){return a(t),this.on(e,l(this,e,t)),this},o.prototype.prependOnceListener=function(e,t){return a(t),this.prependListener(e,l(this,e,t)),this},o.prototype.removeListener=function(e,t){var r,i,n,o,s;if(a(t),void 0===(i=this._events))return this;if(void 0===(r=i[e]))return this;if(r===t||r.listener===t)0==--this._eventsCount?this._events=Object.create(null):(delete i[e],i.removeListener&&this.emit("removeListener",e,r.listener||t));else if("function"!=typeof r){for(n=-1,o=r.length-1;o>=0;o--)if(r[o]===t||r[o].listener===t){s=r[o].listener,n=o;break}if(n<0)return this;0===n?r.shift():function(e,t){for(;t+1<e.length;t++)e[t]=e[t+1];e.pop()}(r,n),1===r.length&&(i[e]=r[0]),void 0!==i.removeListener&&this.emit("removeListener",e,s||t)}return this},o.prototype.off=o.prototype.removeListener,o.prototype.removeAllListeners=function(e){var t,r,i;if(void 0===(r=this._events))return this;if(void 0===r.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==r[e]&&(0==--this._eventsCount?this._events=Object.create(null):delete r[e]),this;if(0===arguments.length){var n,o=Object.keys(r);for(i=0;i<o.length;++i)"removeListener"!==(n=o[i])&&this.removeAllListeners(n);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(t=r[e]))this.removeListener(e,t);else if(void 0!==t)for(i=t.length-1;i>=0;i--)this.removeListener(e,t[i]);return this},o.prototype.listeners=function(e){return _(this,e,!0)},o.prototype.rawListeners=function(e){return _(this,e,!1)},o.listenerCount=function(e,t){return"function"==typeof e.listenerCount?e.listenerCount(t):h.call(e,t)},o.prototype.listenerCount=h,o.prototype.eventNames=function(){return this._eventsCount>0?t(this._events):[]}},645:(e,t)=>{t.read=function(e,t,r,i,n){var o,s,a=8*n-i-1,c=(1<<a)-1,u=c>>1,f=-7,l=r?n-1:0,_=r?-1:1,h=e[t+l];for(l+=_,o=h&(1<<-f)-1,h>>=-f,f+=a;f>0;o=256*o+e[t+l],l+=_,f-=8);for(s=o&(1<<-f)-1,o>>=-f,f+=i;f>0;s=256*s+e[t+l],l+=_,f-=8);if(0===o)o=1-u;else{if(o===c)return s?NaN:1/0*(h?-1:1);s+=Math.pow(2,i),o-=u}return(h?-1:1)*s*Math.pow(2,o-i)},t.write=function(e,t,r,i,n,o){var s,a,c,u=8*o-n-1,f=(1<<u)-1,l=f>>1,_=23===n?Math.pow(2,-24)-Math.pow(2,-77):0,h=i?0:o-1,d=i?1:-1,p=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(a=isNaN(t)?1:0,s=f):(s=Math.floor(Math.log(t)/Math.LN2),t*(c=Math.pow(2,-s))<1&&(s--,c*=2),(t+=s+l>=1?_/c:_*Math.pow(2,1-l))*c>=2&&(s++,c/=2),s+l>=f?(a=0,s=f):s+l>=1?(a=(t*c-1)*Math.pow(2,n),s+=l):(a=t*Math.pow(2,l-1)*Math.pow(2,n),s=0));n>=8;e[r+h]=255&a,h+=d,a/=256,n-=8);for(s=s<<n|a,u+=n;u>0;e[r+h]=255&s,h+=d,s/=256,u-=8);e[r+h-d]|=128*p}},7824:e=>{var t=1e3,r=60*t,i=60*r,n=24*i;function o(e,t,r,i){var n=t>=1.5*r;return Math.round(e/r)+" "+i+(n?"s":"")}e.exports=function(e,s){s=s||{};var a,c,u=typeof e;if("string"===u&&e.length>0)return function(e){if(!((e=String(e)).length>100)){var o=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(e);if(o){var s=parseFloat(o[1]);switch((o[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return 315576e5*s;case"weeks":case"week":case"w":return 6048e5*s;case"days":case"day":case"d":return s*n;case"hours":case"hour":case"hrs":case"hr":case"h":return s*i;case"minutes":case"minute":case"mins":case"min":case"m":return s*r;case"seconds":case"second":case"secs":case"sec":case"s":return s*t;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return s;default:return}}}}(e);if("number"===u&&isFinite(e))return s.long?(a=e,(c=Math.abs(a))>=n?o(a,c,n,"day"):c>=i?o(a,c,i,"hour"):c>=r?o(a,c,r,"minute"):c>=t?o(a,c,t,"second"):a+" ms"):function(e){var o=Math.abs(e);return o>=n?Math.round(e/n)+"d":o>=i?Math.round(e/i)+"h":o>=r?Math.round(e/r)+"m":o>=t?Math.round(e/t)+"s":e+"ms"}(e);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))}},4312:(e,t)=>{"use strict";var r,i,n,o,s,a,c,u,f,l,_,h,d,p,E,O,T,b,M,v,y,R,m,S,A,I;Object.defineProperty(t,"__esModule",{value:!0}),t.MarioColor=t.MarioPantsType=t.PortInputFormatSetupSubCommand=t.ModeInformationType=t.HWNetworkSubFamily=t.HWNetworkFamily=t.HWNetWorkCommandType=t.ErrorCode=t.IOTypeID=t.AlertPayload=t.AlertOperation=t.AlertType=t.ActionType=t.HubPropertyPayload=t.HubPropertyOperation=t.HubPropertyReference=t.MessageType=t.BLECharacteristic=t.BLEService=t.BLEManufacturerData=t.DuploTrainBaseSound=t.BrakingStyle=t.ButtonState=t.ColorNames=t.Color=t.DeviceTypeNames=t.DeviceType=t.HubTypeNames=t.HubType=void 0,function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.WEDO2_SMART_HUB=1]="WEDO2_SMART_HUB",e[e.MOVE_HUB=2]="MOVE_HUB",e[e.HUB=3]="HUB",e[e.REMOTE_CONTROL=4]="REMOTE_CONTROL",e[e.DUPLO_TRAIN_BASE=5]="DUPLO_TRAIN_BASE",e[e.TECHNIC_MEDIUM_HUB=6]="TECHNIC_MEDIUM_HUB",e[e.MARIO=7]="MARIO"}(r=t.HubType||(t.HubType={})),t.HubTypeNames=r,function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.SIMPLE_MEDIUM_LINEAR_MOTOR=1]="SIMPLE_MEDIUM_LINEAR_MOTOR",e[e.TRAIN_MOTOR=2]="TRAIN_MOTOR",e[e.LIGHT=8]="LIGHT",e[e.VOLTAGE_SENSOR=20]="VOLTAGE_SENSOR",e[e.CURRENT_SENSOR=21]="CURRENT_SENSOR",e[e.PIEZO_BUZZER=22]="PIEZO_BUZZER",e[e.HUB_LED=23]="HUB_LED",e[e.TILT_SENSOR=34]="TILT_SENSOR",e[e.MOTION_SENSOR=35]="MOTION_SENSOR",e[e.COLOR_DISTANCE_SENSOR=37]="COLOR_DISTANCE_SENSOR",e[e.MEDIUM_LINEAR_MOTOR=38]="MEDIUM_LINEAR_MOTOR",e[e.MOVE_HUB_MEDIUM_LINEAR_MOTOR=39]="MOVE_HUB_MEDIUM_LINEAR_MOTOR",e[e.MOVE_HUB_TILT_SENSOR=40]="MOVE_HUB_TILT_SENSOR",e[e.DUPLO_TRAIN_BASE_MOTOR=41]="DUPLO_TRAIN_BASE_MOTOR",e[e.DUPLO_TRAIN_BASE_SPEAKER=42]="DUPLO_TRAIN_BASE_SPEAKER",e[e.DUPLO_TRAIN_BASE_COLOR_SENSOR=43]="DUPLO_TRAIN_BASE_COLOR_SENSOR",e[e.DUPLO_TRAIN_BASE_SPEEDOMETER=44]="DUPLO_TRAIN_BASE_SPEEDOMETER",e[e.TECHNIC_LARGE_LINEAR_MOTOR=46]="TECHNIC_LARGE_LINEAR_MOTOR",e[e.TECHNIC_XLARGE_LINEAR_MOTOR=47]="TECHNIC_XLARGE_LINEAR_MOTOR",e[e.TECHNIC_MEDIUM_ANGULAR_MOTOR=48]="TECHNIC_MEDIUM_ANGULAR_MOTOR",e[e.TECHNIC_LARGE_ANGULAR_MOTOR=49]="TECHNIC_LARGE_ANGULAR_MOTOR",e[e.TECHNIC_MEDIUM_HUB_GEST_SENSOR=54]="TECHNIC_MEDIUM_HUB_GEST_SENSOR",e[e.REMOTE_CONTROL_BUTTON=55]="REMOTE_CONTROL_BUTTON",e[e.REMOTE_CONTROL_RSSI=56]="REMOTE_CONTROL_RSSI",e[e.TECHNIC_MEDIUM_HUB_ACCELEROMETER=57]="TECHNIC_MEDIUM_HUB_ACCELEROMETER",e[e.TECHNIC_MEDIUM_HUB_GYRO_SENSOR=58]="TECHNIC_MEDIUM_HUB_GYRO_SENSOR",e[e.TECHNIC_MEDIUM_HUB_TILT_SENSOR=59]="TECHNIC_MEDIUM_HUB_TILT_SENSOR",e[e.TECHNIC_MEDIUM_HUB_TEMPERATURE_SENSOR=60]="TECHNIC_MEDIUM_HUB_TEMPERATURE_SENSOR",e[e.TECHNIC_COLOR_SENSOR=61]="TECHNIC_COLOR_SENSOR",e[e.TECHNIC_DISTANCE_SENSOR=62]="TECHNIC_DISTANCE_SENSOR",e[e.TECHNIC_FORCE_SENSOR=63]="TECHNIC_FORCE_SENSOR",e[e.MARIO_ACCELEROMETER=71]="MARIO_ACCELEROMETER",e[e.MARIO_BARCODE_SENSOR=73]="MARIO_BARCODE_SENSOR",e[e.MARIO_PANTS_SENSOR=74]="MARIO_PANTS_SENSOR",e[e.TECHNIC_MEDIUM_ANGULAR_MOTOR_GREY=75]="TECHNIC_MEDIUM_ANGULAR_MOTOR_GREY",e[e.TECHNIC_LARGE_ANGULAR_MOTOR_GREY=76]="TECHNIC_LARGE_ANGULAR_MOTOR_GREY"}(i=t.DeviceType||(t.DeviceType={})),t.DeviceTypeNames=i,function(e){e[e.BLACK=0]="BLACK",e[e.PINK=1]="PINK",e[e.PURPLE=2]="PURPLE",e[e.BLUE=3]="BLUE",e[e.LIGHT_BLUE=4]="LIGHT_BLUE",e[e.CYAN=5]="CYAN",e[e.GREEN=6]="GREEN",e[e.YELLOW=7]="YELLOW",e[e.ORANGE=8]="ORANGE",e[e.RED=9]="RED",e[e.WHITE=10]="WHITE",e[e.NONE=255]="NONE"}(n=t.Color||(t.Color={})),t.ColorNames=n,(I=t.ButtonState||(t.ButtonState={}))[I.PRESSED=2]="PRESSED",I[I.RELEASED=0]="RELEASED",I[I.UP=1]="UP",I[I.DOWN=255]="DOWN",I[I.STOP=127]="STOP",(A=t.BrakingStyle||(t.BrakingStyle={}))[A.FLOAT=0]="FLOAT",A[A.HOLD=126]="HOLD",A[A.BRAKE=127]="BRAKE",(S=t.DuploTrainBaseSound||(t.DuploTrainBaseSound={}))[S.BRAKE=3]="BRAKE",S[S.STATION_DEPARTURE=5]="STATION_DEPARTURE",S[S.WATER_REFILL=7]="WATER_REFILL",S[S.HORN=9]="HORN",S[S.STEAM=10]="STEAM",(m=t.BLEManufacturerData||(t.BLEManufacturerData={}))[m.DUPLO_TRAIN_BASE_ID=32]="DUPLO_TRAIN_BASE_ID",m[m.MOVE_HUB_ID=64]="MOVE_HUB_ID",m[m.HUB_ID=65]="HUB_ID",m[m.REMOTE_CONTROL_ID=66]="REMOTE_CONTROL_ID",m[m.MARIO_ID=67]="MARIO_ID",m[m.TECHNIC_MEDIUM_HUB=128]="TECHNIC_MEDIUM_HUB",(R=t.BLEService||(t.BLEService={})).WEDO2_SMART_HUB="00001523-1212-efde-1523-785feabcd123",R.WEDO2_SMART_HUB_2="00004f0e-1212-efde-1523-785feabcd123",R.WEDO2_SMART_HUB_3="2a19",R.WEDO2_SMART_HUB_4="180f",R.WEDO2_SMART_HUB_5="180a",R.LPF2_HUB="00001623-1212-efde-1623-785feabcd123",(y=t.BLECharacteristic||(t.BLECharacteristic={})).WEDO2_BATTERY="2a19",y.WEDO2_FIRMWARE_REVISION="2a26",y.WEDO2_BUTTON="00001526-1212-efde-1523-785feabcd123",y.WEDO2_PORT_TYPE="00001527-1212-efde-1523-785feabcd123",y.WEDO2_LOW_VOLTAGE_ALERT="00001528-1212-efde-1523-785feabcd123",y.WEDO2_HIGH_CURRENT_ALERT="00001529-1212-efde-1523-785feabcd123",y.WEDO2_LOW_SIGNAL_ALERT="0000152a-1212-efde-1523-785feabcd123",y.WEDO2_DISCONNECT="0000152b-1212-efde-1523-785feabcd123",y.WEDO2_SENSOR_VALUE="00001560-1212-efde-1523-785feabcd123",y.WEDO2_VALUE_FORMAT="00001561-1212-efde-1523-785feabcd123",y.WEDO2_PORT_TYPE_WRITE="00001563-1212-efde-1523-785feabcd123",y.WEDO2_MOTOR_VALUE_WRITE="00001565-1212-efde-1523-785feabcd123",y.WEDO2_NAME_ID="00001524-1212-efde-1523-785feabcd123",y.LPF2_ALL="00001624-1212-efde-1623-785feabcd123",(v=t.MessageType||(t.MessageType={}))[v.HUB_PROPERTIES=1]="HUB_PROPERTIES",v[v.HUB_ACTIONS=2]="HUB_ACTIONS",v[v.HUB_ALERTS=3]="HUB_ALERTS",v[v.HUB_ATTACHED_IO=4]="HUB_ATTACHED_IO",v[v.GENERIC_ERROR_MESSAGES=5]="GENERIC_ERROR_MESSAGES",v[v.HW_NETWORK_COMMANDS=8]="HW_NETWORK_COMMANDS",v[v.FW_UPDATE_GO_INTO_BOOT_MODE=16]="FW_UPDATE_GO_INTO_BOOT_MODE",v[v.FW_UPDATE_LOCK_MEMORY=17]="FW_UPDATE_LOCK_MEMORY",v[v.FW_UPDATE_LOCK_STATUS_REQUEST=18]="FW_UPDATE_LOCK_STATUS_REQUEST",v[v.FW_LOCK_STATUS=19]="FW_LOCK_STATUS",v[v.PORT_INFORMATION_REQUEST=33]="PORT_INFORMATION_REQUEST",v[v.PORT_MODE_INFORMATION_REQUEST=34]="PORT_MODE_INFORMATION_REQUEST",v[v.PORT_INPUT_FORMAT_SETUP_SINGLE=65]="PORT_INPUT_FORMAT_SETUP_SINGLE",v[v.PORT_INPUT_FORMAT_SETUP_COMBINEDMODE=66]="PORT_INPUT_FORMAT_SETUP_COMBINEDMODE",v[v.PORT_INFORMATION=67]="PORT_INFORMATION",v[v.PORT_MODE_INFORMATION=68]="PORT_MODE_INFORMATION",v[v.PORT_VALUE_SINGLE=69]="PORT_VALUE_SINGLE",v[v.PORT_VALUE_COMBINEDMODE=70]="PORT_VALUE_COMBINEDMODE",v[v.PORT_INPUT_FORMAT_SINGLE=71]="PORT_INPUT_FORMAT_SINGLE",v[v.PORT_INPUT_FORMAT_COMBINEDMODE=72]="PORT_INPUT_FORMAT_COMBINEDMODE",v[v.VIRTUAL_PORT_SETUP=97]="VIRTUAL_PORT_SETUP",v[v.PORT_OUTPUT_COMMAND=129]="PORT_OUTPUT_COMMAND",v[v.PORT_OUTPUT_COMMAND_FEEDBACK=130]="PORT_OUTPUT_COMMAND_FEEDBACK",(M=t.HubPropertyReference||(t.HubPropertyReference={}))[M.ADVERTISING_NAME=1]="ADVERTISING_NAME",M[M.BUTTON=2]="BUTTON",M[M.FW_VERSION=3]="FW_VERSION",M[M.HW_VERSION=4]="HW_VERSION",M[M.RSSI=5]="RSSI",M[M.BATTERY_VOLTAGE=6]="BATTERY_VOLTAGE",M[M.BATTERY_TYPE=7]="BATTERY_TYPE",M[M.MANUFACTURER_NAME=8]="MANUFACTURER_NAME",M[M.RADIO_FIRMWARE_VERSION=9]="RADIO_FIRMWARE_VERSION",M[M.LEGO_WIRELESS_PROTOCOL_VERSION=10]="LEGO_WIRELESS_PROTOCOL_VERSION",M[M.SYSTEM_TYPE_ID=11]="SYSTEM_TYPE_ID",M[M.HW_NETWORK_ID=12]="HW_NETWORK_ID",M[M.PRIMARY_MAC_ADDRESS=13]="PRIMARY_MAC_ADDRESS",M[M.SECONDARY_MAC_ADDRESS=14]="SECONDARY_MAC_ADDRESS",M[M.HARDWARE_NETWORK_FAMILY=15]="HARDWARE_NETWORK_FAMILY",(b=t.HubPropertyOperation||(t.HubPropertyOperation={}))[b.SET_DOWNSTREAM=1]="SET_DOWNSTREAM",b[b.ENABLE_UPDATES_DOWNSTREAM=2]="ENABLE_UPDATES_DOWNSTREAM",b[b.DISABLE_UPDATES_DOWNSTREAM=3]="DISABLE_UPDATES_DOWNSTREAM",b[b.RESET_DOWNSTREAM=4]="RESET_DOWNSTREAM",b[b.REQUEST_UPDATE_DOWNSTREAM=5]="REQUEST_UPDATE_DOWNSTREAM",b[b.UPDATE_UPSTREAM=6]="UPDATE_UPSTREAM",(T=t.HubPropertyPayload||(t.HubPropertyPayload={}))[T.ADVERTISING_NAME=1]="ADVERTISING_NAME",T[T.BUTTON_STATE=2]="BUTTON_STATE",T[T.FW_VERSION=3]="FW_VERSION",T[T.HW_VERSION=4]="HW_VERSION",T[T.RSSI=5]="RSSI",T[T.BATTERY_VOLTAGE=6]="BATTERY_VOLTAGE",T[T.BATTERY_TYPE=7]="BATTERY_TYPE",T[T.MANUFACTURER_NAME=8]="MANUFACTURER_NAME",T[T.RADIO_FIRMWARE_VERSION=9]="RADIO_FIRMWARE_VERSION",T[T.LWP_PROTOCOL_VERSION=10]="LWP_PROTOCOL_VERSION",T[T.SYSTEM_TYPE_ID=11]="SYSTEM_TYPE_ID",T[T.HW_NETWORK_ID=12]="HW_NETWORK_ID",T[T.PRIMARY_MAC_ADDRESS=13]="PRIMARY_MAC_ADDRESS",T[T.SECONDARY_MAC_ADDRESS=14]="SECONDARY_MAC_ADDRESS",T[T.HW_NETWORK_FAMILY=15]="HW_NETWORK_FAMILY",(O=t.ActionType||(t.ActionType={}))[O.SWITCH_OFF_HUB=1]="SWITCH_OFF_HUB",O[O.DISCONNECT=2]="DISCONNECT",O[O.VCC_PORT_CONTROL_ON=3]="VCC_PORT_CONTROL_ON",O[O.VCC_PORT_CONTROL_OFF=4]="VCC_PORT_CONTROL_OFF",O[O.ACTIVATE_BUSY_INDICATION=5]="ACTIVATE_BUSY_INDICATION",O[O.RESET_BUSY_INDICATION=6]="RESET_BUSY_INDICATION",O[O.SHUTDOWN=47]="SHUTDOWN",O[O.HUB_WILL_SWITCH_OFF=48]="HUB_WILL_SWITCH_OFF",O[O.HUB_WILL_DISCONNECT=49]="HUB_WILL_DISCONNECT",O[O.HUB_WILL_GO_INTO_BOOT_MODE=50]="HUB_WILL_GO_INTO_BOOT_MODE",(E=t.AlertType||(t.AlertType={}))[E.LOW_VOLTAGE=1]="LOW_VOLTAGE",E[E.HIGH_CURRENT=2]="HIGH_CURRENT",E[E.LOW_SIGNAL_STRENGTH=3]="LOW_SIGNAL_STRENGTH",E[E.OVER_POWER_CONDITION=4]="OVER_POWER_CONDITION",(p=t.AlertOperation||(t.AlertOperation={}))[p.LOW_VOLTAGE=1]="LOW_VOLTAGE",p[p.HIGH_CURRENT=2]="HIGH_CURRENT",p[p.LOW_SIGNAL_STRENGTH=3]="LOW_SIGNAL_STRENGTH",p[p.OVER_POWER_CONDITION=4]="OVER_POWER_CONDITION",(d=t.AlertPayload||(t.AlertPayload={}))[d.STATUS_OK=0]="STATUS_OK",d[d.ALERT=255]="ALERT",function(e){e[e.DETACHED_IO=0]="DETACHED_IO",e[e.ATTACHED_IO=1]="ATTACHED_IO",e[e.ATTACHED_VIRTUAL_IO=2]="ATTACHED_VIRTUAL_IO"}(t.AlertPayload||(t.AlertPayload={})),(h=t.IOTypeID||(t.IOTypeID={}))[h.MOTOR=1]="MOTOR",h[h.SYSTEM_TRAIN_MOTOR=2]="SYSTEM_TRAIN_MOTOR",h[h.BUTTON=5]="BUTTON",h[h.LED_LIGHT=8]="LED_LIGHT",h[h.VOLTAGE=20]="VOLTAGE",h[h.CURRENT=21]="CURRENT",h[h.PIEZO_TONE_SOUND=22]="PIEZO_TONE_SOUND",h[h.RGB_LIGHT=23]="RGB_LIGHT",h[h.EXTERNAL_TILT_SENSOR=34]="EXTERNAL_TILT_SENSOR",h[h.MOTION_SENSOR=35]="MOTION_SENSOR",h[h.VISION_SENSOR=37]="VISION_SENSOR",h[h.EXTERNAL_MOTOR=38]="EXTERNAL_MOTOR",h[h.INTERNAL_MOTOR=39]="INTERNAL_MOTOR",h[h.INTERNAL_TILT=40]="INTERNAL_TILT",(_=t.ErrorCode||(t.ErrorCode={}))[_.ACK=1]="ACK",_[_.MACK=2]="MACK",_[_.BUFFER_OVERFLOW=3]="BUFFER_OVERFLOW",_[_.TIMEOUT=4]="TIMEOUT",_[_.COMMAND_NOT_RECOGNIZED=5]="COMMAND_NOT_RECOGNIZED",_[_.INVALID_USE=6]="INVALID_USE",_[_.OVERCURRENT=7]="OVERCURRENT",_[_.INTERNAL_ERROR=8]="INTERNAL_ERROR",(l=t.HWNetWorkCommandType||(t.HWNetWorkCommandType={}))[l.CONNECTION_REQUEST=2]="CONNECTION_REQUEST",l[l.FAMILY_REQUEST=3]="FAMILY_REQUEST",l[l.FAMILY_SET=4]="FAMILY_SET",l[l.JOIN_DENIED=5]="JOIN_DENIED",l[l.GET_FAMILY=6]="GET_FAMILY",l[l.FAMILY=7]="FAMILY",l[l.GET_SUBFAMILY=8]="GET_SUBFAMILY",l[l.SUBFAMILY=9]="SUBFAMILY",l[l.SUBFAMILY_SET=10]="SUBFAMILY_SET",l[l.GET_EXTENDED_FAMILY=11]="GET_EXTENDED_FAMILY",l[l.EXTENDED_FAMILY=12]="EXTENDED_FAMILY",l[l.EXTENDED_FAMILY_SET=13]="EXTENDED_FAMILY_SET",l[l.RESET_LONG_PRESS_TIMING=14]="RESET_LONG_PRESS_TIMING",(f=t.HWNetworkFamily||(t.HWNetworkFamily={}))[f.GREEN=1]="GREEN",f[f.YELLOW=2]="YELLOW",f[f.RED=3]="RED",f[f.BLUE=4]="BLUE",f[f.PURPLE=5]="PURPLE",f[f.LIGHT_BLUE=6]="LIGHT_BLUE",f[f.TEAL=7]="TEAL",f[f.PINK=8]="PINK",f[f.WHITE=0]="WHITE",(u=t.HWNetworkSubFamily||(t.HWNetworkSubFamily={}))[u.ONE_FLASH=1]="ONE_FLASH",u[u.TWO_FLASHES=2]="TWO_FLASHES",u[u.THREE_FLASHES=3]="THREE_FLASHES",u[u.FOUR_FLASHES=4]="FOUR_FLASHES",u[u.FIVE_FLASHES=5]="FIVE_FLASHES",u[u.SIX_FLASHES=6]="SIX_FLASHES",u[u.SEVEN_FLASHES=7]="SEVEN_FLASHES",(c=t.ModeInformationType||(t.ModeInformationType={}))[c.NAME=0]="NAME",c[c.RAW=1]="RAW",c[c.PCT=2]="PCT",c[c.SI=3]="SI",c[c.SYMBOL=4]="SYMBOL",c[c.MAPPING=5]="MAPPING",c[c.USED_INTERNALLY=6]="USED_INTERNALLY",c[c.MOTOR_BIAS=7]="MOTOR_BIAS",c[c.CAPABILITY_BITS=8]="CAPABILITY_BITS",c[c.VALUE_FORMAT=128]="VALUE_FORMAT",(a=t.PortInputFormatSetupSubCommand||(t.PortInputFormatSetupSubCommand={}))[a.SET_MODEANDDATASET_COMBINATIONS=1]="SET_MODEANDDATASET_COMBINATIONS",a[a.LOCK_LPF2_DEVICE_FOR_SETUP=2]="LOCK_LPF2_DEVICE_FOR_SETUP",a[a.UNLOCKANDSTARTWITHMULTIUPDATEENABLED=3]="UNLOCKANDSTARTWITHMULTIUPDATEENABLED",a[a.UNLOCKANDSTARTWITHMULTIUPDATEDISABLED=4]="UNLOCKANDSTARTWITHMULTIUPDATEDISABLED",a[a.NOT_USED=5]="NOT_USED",a[a.RESET_SENSOR=6]="RESET_SENSOR",(s=t.MarioPantsType||(t.MarioPantsType={}))[s.NONE=0]="NONE",s[s.PROPELLER=6]="PROPELLER",s[s.CAT=17]="CAT",s[s.FIRE=18]="FIRE",s[s.NORMAL=33]="NORMAL",s[s.BUILDER=34]="BUILDER",(o=t.MarioColor||(t.MarioColor={}))[o.WHITE=4864]="WHITE",o[o.RED=5376]="RED",o[o.BLUE=5888]="BLUE",o[o.YELLOW=6144]="YELLOW",o[o.BLACK=6656]="BLACK",o[o.GREEN=9472]="GREEN",o[o.BROWN=27136]="BROWN",o[o.CYAN=16897]="CYAN"},9045:function(e,t,r){"use strict";var i=r(8764).Buffer,n=this&&this.__createBinding||(Object.create?function(e,t,r,i){void 0===i&&(i=r),Object.defineProperty(e,i,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,i){void 0===i&&(i=r),e[i]=t[r]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return o(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.ModeMap=t.Mode=t.AbsoluteMotor=void 0;const a=r(9847),c=s(r(4312)),u=r(8593);class f extends a.TachoMotor{constructor(e,r,i={},n=c.DeviceType.UNKNOWN){super(e,r,Object.assign({},i,t.ModeMap),n)}receive(e){switch(this._mode){case l.ABSOLUTE:const t=u.normalizeAngle(e.readInt16LE(this.isWeDo2SmartHub?2:4));this.notify("absolute",{angle:t});break;default:super.receive(e)}}gotoAngle(e,t=100){if(!this.isVirtualPort&&e instanceof Array)throw new Error("Only virtual ports can accept multiple positions");if(this.isWeDo2SmartHub)throw new Error("Absolute positioning is not available on the WeDo 2.0 Smart Hub");return this.cancelEventTimer(),new Promise((r=>{let n;null==t&&(t=100),e instanceof Array?(n=i.from([129,this.portId,17,14,0,0,0,0,0,0,0,0,u.mapSpeed(t),this._maxPower,this._brakeStyle,this.useProfile()]),n.writeInt32LE(u.normalizeAngle(e[0]),4),n.writeInt32LE(u.normalizeAngle(e[1]),8)):(n=i.from([129,this.portId,17,13,0,0,0,0,u.mapSpeed(t),this._maxPower,this._brakeStyle,this.useProfile()]),n.writeInt32LE(u.normalizeAngle(e),4)),this.send(n),this._finishedCallbacks.push((()=>r()))}))}gotoRealZero(e=100){return new Promise((t=>{const r=this.mode;let i=!1;this.on("absolute",(async({angle:n})=>{if(!i)return i=!0,n<0?n=Math.abs(n):e=-e,await this.rotateByDegrees(n,e),r&&this.subscribe(r),t()})),this.requestUpdate()}))}resetZero(){return new Promise((e=>{const t=i.from([129,this.portId,17,81,2,0,0,0,0]);return this.send(t),e()}))}}var l;t.AbsoluteMotor=f,function(e){e[e.ROTATION=2]="ROTATION",e[e.ABSOLUTE=3]="ABSOLUTE"}(l=t.Mode||(t.Mode={})),t.ModeMap={rotate:l.ROTATION,absolute:l.ABSOLUTE}},2897:function(e,t,r){"use strict";var i=r(8764).Buffer,n=this&&this.__createBinding||(Object.create?function(e,t,r,i){void 0===i&&(i=r),Object.defineProperty(e,i,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,i){void 0===i&&(i=r),e[i]=t[r]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return o(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.BasicMotor=void 0;const a=r(5468),c=s(r(4312)),u=r(8593);class f extends a.Device{constructor(e,t,r,i=c.DeviceType.UNKNOWN){super(e,t,r,i)}setPower(e,t=!0){return t&&this.cancelEventTimer(),this.writeDirect(0,i.from([u.mapSpeed(e)]))}rampPower(e,t,r){return this.cancelEventTimer(),new Promise((i=>{u.calculateRamp(this,e,t,r).on("changePower",(e=>{this.setPower(e,!1)})).on("finished",i)}))}stop(){return this.cancelEventTimer(),this.setPower(0)}brake(){return this.cancelEventTimer(),this.setPower(c.BrakingStyle.BRAKE)}}t.BasicMotor=f},9126:function(e,t,r){"use strict";var i=r(8764).Buffer,n=this&&this.__createBinding||(Object.create?function(e,t,r,i){void 0===i&&(i=r),Object.defineProperty(e,i,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,i){void 0===i&&(i=r),e[i]=t[r]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return o(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.Output=t.ModeMap=t.Mode=t.ColorDistanceSensor=void 0;const a=r(5468),c=s(r(4312));class u extends a.Device{constructor(e,r){super(e,r,t.ModeMap,c.DeviceType.COLOR_DISTANCE_SENSOR)}receive(e){switch(this._mode){case f.COLOR:if(e[this.isWeDo2SmartHub?2:4]<=10){const t=e[this.isWeDo2SmartHub?2:4];this.notify("color",{color:t})}break;case f.DISTANCE:if(this.isWeDo2SmartHub)break;if(e[4]<=10){let t=Math.floor(25.4*e[4]);t<0&&(t=0),this.notify("distance",{distance:t})}break;case f.COLOR_AND_DISTANCE:if(this.isWeDo2SmartHub)break;let t=e[5];const r=e[7];if(r>0&&(t+=1/r),t=Math.floor(25.4*t)-20,e[4]<=10){const r=e[4];this.notify("colorAndDistance",{color:r,distance:t})}}}setPFExtendedChannel(e){let t=0;e>=4&&(e-=4,t=1);const r=i.alloc(2);return r[0]=(e-1<<4)+(t<<3),r[1]=96,this.sendPFIRMessage(r)}setPFPower(e,t,r){let n=0;e>4&&(e-=4,n=1);const o=i.alloc(2);return o[0]=(e-1<<4)+(n<<3)+("RED"===t?4:5),o[1]=this._pfPowerToPWM(r)<<4,this.sendPFIRMessage(o)}startPFMotors(e,t,r){let n=0;e>4&&(e-=4,n=1);const o=i.alloc(2);return o[0]=(e-1+4+(n<<3)<<4)+this._pfPowerToPWM(t),o[1]=this._pfPowerToPWM(r)<<4,this.sendPFIRMessage(o)}sendPFIRMessage(e){if(this.isWeDo2SmartHub)throw new Error("Power Functions IR is not available on the WeDo 2.0 Smart Hub");{const t=i.alloc(2);return t[0]=(e[0]<<4)+(e[1]>>4),t[1]=e[0]>>4,this.subscribe(f.PF_IR),this.writeDirect(7,t)}}setColor(e){return new Promise((t=>{if(!1===e&&(e=0),this.isWeDo2SmartHub)throw new Error("Setting LED color is not available on the WeDo 2.0 Smart Hub");return this.subscribe(f.LED),this.writeDirect(5,i.from([e])),t()}))}_pfPowerToPWM(e){return 15&e}}var f,l;t.ColorDistanceSensor=u,function(e){e[e.COLOR=0]="COLOR",e[e.DISTANCE=1]="DISTANCE",e[e.LED=5]="LED",e[e.PF_IR=7]="PF_IR",e[e.COLOR_AND_DISTANCE=8]="COLOR_AND_DISTANCE"}(f=t.Mode||(t.Mode={})),t.ModeMap={color:f.COLOR,distance:f.DISTANCE,colorAndDistance:f.COLOR_AND_DISTANCE},(l=t.Output||(t.Output={})).RED="RED",l.BLUE="BLUE"},4499:function(e,t,r){"use strict";var i=this&&this.__createBinding||(Object.create?function(e,t,r,i){void 0===i&&(i=r),Object.defineProperty(e,i,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,i){void 0===i&&(i=r),e[i]=t[r]}),n=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&i(t,e,r);return n(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.ModeMap=t.Mode=t.CurrentSensor=void 0;const s=r(5468),a=o(r(4312));class c extends s.Device{constructor(e,r){super(e,r,t.ModeMap,a.DeviceType.CURRENT_SENSOR)}receive(e){switch(this.mode){case u.CURRENT:if(this.isWeDo2SmartHub){const t=e.readInt16LE(2)/1e3;this.notify("current",{current:t})}else{let t=f[this.hub.type];void 0===t&&(t=f[a.HubType.UNKNOWN]);let r=l[this.hub.type];void 0===r&&(r=l[a.HubType.UNKNOWN]);const i=e.readUInt16LE(4)*t/r;this.notify("current",{current:i})}}}}var u;t.CurrentSensor=c,function(e){e[e.CURRENT=0]="CURRENT"}(u=t.Mode||(t.Mode={})),t.ModeMap={current:u.CURRENT};const f={[a.HubType.UNKNOWN]:2444,[a.HubType.TECHNIC_MEDIUM_HUB]:4175},l={[a.HubType.UNKNOWN]:4095}},5468:function(e,t,r){"use strict";var i=r(8764).Buffer,n=this&&this.__createBinding||(Object.create?function(e,t,r,i){void 0===i&&(i=r),Object.defineProperty(e,i,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,i){void 0===i&&(i=r),e[i]=t[r]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return o(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.Device=void 0;const a=r(7187),c=s(r(4312));class u extends a.EventEmitter{constructor(e,t,r={},i=c.DeviceType.UNKNOWN){super(),this.autoSubscribe=!0,this.values={},this._busy=!1,this._finishedCallbacks=[],this._connected=!0,this._modeMap={},this._isVirtualPort=!1,this._eventTimer=null,this._hub=e,this._portId=t,this._type=i,this._modeMap=r,this._isWeDo2SmartHub=this.hub.type===c.HubType.WEDO2_SMART_HUB,this._isVirtualPort=this.hub.isPortVirtual(t);const n=e=>{"detach"!==e&&this.autoSubscribe&&void 0!==this._modeMap[e]&&this.subscribe(this._modeMap[e])},o=e=>{e.portId===this.portId&&(this._connected=!1,this.hub.removeListener("detach",o),this.emit("detach"))};for(const e in this._modeMap)this.hub.listenerCount(e)>0&&n(e);this.hub.on("newListener",n),this.on("newListener",n),this.hub.on("detach",o)}get connected(){return this._connected}get hub(){return this._hub}get portId(){return this._portId}get portName(){return this.hub.getPortNameForPortId(this.portId)}get type(){return this._type}get typeName(){return c.DeviceTypeNames[this.type]}get mode(){return this._mode}get isWeDo2SmartHub(){return this._isWeDo2SmartHub}get isVirtualPort(){return this._isVirtualPort}writeDirect(e,t){return this.isWeDo2SmartHub?this.send(i.concat([i.from([this.portId,1,2]),t]),c.BLECharacteristic.WEDO2_MOTOR_VALUE_WRITE):this.send(i.concat([i.from([129,this.portId,17,81,e]),t]),c.BLECharacteristic.LPF2_ALL)}send(e,t=c.BLECharacteristic.LPF2_ALL){return this._ensureConnected(),this.hub.send(e,t)}subscribe(e){this._ensureConnected(),e!==this._mode&&(this._mode=e,this.hub.subscribe(this.portId,this.type,e))}unsubscribe(e){this._ensureConnected()}receive(e){this.notify("receive",{message:e})}notify(e,t){this.values[e]=t,this.emit(e,t),this.hub.listenerCount(e)>0&&this.hub.emit(e,this,t)}requestUpdate(){this.send(i.from([33,this.portId,0]))}finish(e){for(this._busy=1==(1&e);this._finishedCallbacks.length>Number(this._busy);){const e=this._finishedCallbacks.shift();e&&e()}}setEventTimer(e){this._eventTimer=e}cancelEventTimer(){this._eventTimer&&(clearTimeout(this._eventTimer),this._eventTimer=null)}_ensureConnected(){if(!this.connected)throw new Error("Device is not connected")}}t.Device=u},1718:function(e,t,r){"use strict";var i=this&&this.__createBinding||(Object.create?function(e,t,r,i){void 0===i&&(i=r),Object.defineProperty(e,i,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,i){void 0===i&&(i=r),e[i]=t[r]}),n=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&i(t,e,r);return n(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.ModeMap=t.Mode=t.DuploTrainBaseColorSensor=void 0;const s=r(5468),a=o(r(4312));class c extends s.Device{constructor(e,r){super(e,r,t.ModeMap,a.DeviceType.DUPLO_TRAIN_BASE_COLOR_SENSOR)}receive(e){switch(this._mode){case u.COLOR:if(e[4]<=10){const t=e[4];this.notify("color",{color:t})}break;case u.REFLECTIVITY:const t=e[4];this.notify("reflect",{reflect:t});break;case u.RGB:const r=Math.floor(e.readUInt16LE(4)/4),i=Math.floor(e.readUInt16LE(6)/4),n=Math.floor(e.readUInt16LE(8)/4);this.notify("rgb",{red:r,green:i,blue:n})}}}var u;t.DuploTrainBaseColorSensor=c,function(e){e[e.COLOR=0]="COLOR",e[e.REFLECTIVITY=2]="REFLECTIVITY",e[e.RGB=3]="RGB"}(u=t.Mode||(t.Mode={})),t.ModeMap={color:u.COLOR,reflect:u.REFLECTIVITY,rgb:u.RGB}},9539:function(e,t,r){"use strict";var i=this&&this.__createBinding||(Object.create?function(e,t,r,i){void 0===i&&(i=r),Object.defineProperty(e,i,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,i){void 0===i&&(i=r),e[i]=t[r]}),n=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&i(t,e,r);return n(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.DuploTrainBaseMotor=void 0;const s=r(2897),a=o(r(4312));class c extends s.BasicMotor{constructor(e,t){super(e,t,{},a.DeviceType.DUPLO_TRAIN_BASE_MOTOR)}}t.DuploTrainBaseMotor=c},6758:function(e,t,r){"use strict";var i=r(8764).Buffer,n=this&&this.__createBinding||(Object.create?function(e,t,r,i){void 0===i&&(i=r),Object.defineProperty(e,i,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,i){void 0===i&&(i=r),e[i]=t[r]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return o(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.Mode=t.DuploTrainBaseSpeaker=void 0;const a=r(5468),c=s(r(4312));class u extends a.Device{constructor(e,t){super(e,t,{},c.DeviceType.DUPLO_TRAIN_BASE_SPEAKER)}playSound(e){return new Promise((t=>(this.subscribe(f.SOUND),this.writeDirect(1,i.from([e])),t())))}playTone(e){this.subscribe(f.TONE),this.writeDirect(2,i.from([e]))}}var f;t.DuploTrainBaseSpeaker=u,function(e){e[e.SOUND=1]="SOUND",e[e.TONE=2]="TONE"}(f=t.Mode||(t.Mode={}))},1668:function(e,t,r){"use strict";var i=this&&this.__createBinding||(Object.create?function(e,t,r,i){void 0===i&&(i=r),Object.defineProperty(e,i,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,i){void 0===i&&(i=r),e[i]=t[r]}),n=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&i(t,e,r);return n(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.ModeMap=t.Mode=t.DuploTrainBaseSpeedometer=void 0;const s=r(5468),a=o(r(4312));class c extends s.Device{constructor(e,r){super(e,r,t.ModeMap,a.DeviceType.DUPLO_TRAIN_BASE_SPEEDOMETER)}receive(e){switch(this._mode){case u.SPEED:const t=e.readInt16LE(4);this.notify("speed",{speed:t})}}}var u;t.DuploTrainBaseSpeedometer=c,function(e){e[e.SPEED=0]="SPEED"}(u=t.Mode||(t.Mode={})),t.ModeMap={speed:u.SPEED}},783:function(e,t,r){"use strict";var i=r(8764).Buffer,n=this&&this.__createBinding||(Object.create?function(e,t,r,i){void 0===i&&(i=r),Object.defineProperty(e,i,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,i){void 0===i&&(i=r),e[i]=t[r]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return o(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.Mode=t.HubLED=void 0;const a=r(5468),c=s(r(4312));class u extends a.Device{constructor(e,t){super(e,t,{},c.DeviceType.HUB_LED)}setColor(e){return new Promise((t=>("boolean"==typeof e&&(e=0),this.isWeDo2SmartHub?(this.send(i.from([6,23,1,1]),c.BLECharacteristic.WEDO2_PORT_TYPE_WRITE),this.send(i.from([6,4,1,e]),c.BLECharacteristic.WEDO2_MOTOR_VALUE_WRITE)):(this.subscribe(f.COLOR),this.writeDirect(0,i.from([e]))),t())))}setRGB(e,t,r){return new Promise((n=>(this.isWeDo2SmartHub?(this.send(i.from([6,23,1,2]),c.BLECharacteristic.WEDO2_PORT_TYPE_WRITE),this.send(i.from([6,4,3,e,t,r]),c.BLECharacteristic.WEDO2_MOTOR_VALUE_WRITE)):(this.subscribe(f.RGB),this.writeDirect(1,i.from([e,t,r]))),n())))}}var f;t.HubLED=u,function(e){e[e.COLOR=0]="COLOR",e[e.RGB=1]="RGB"}(f=t.Mode||(t.Mode={}))},3677:function(e,t,r){"use strict";var i=r(8764).Buffer,n=this&&this.__createBinding||(Object.create?function(e,t,r,i){void 0===i&&(i=r),Object.defineProperty(e,i,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,i){void 0===i&&(i=r),e[i]=t[r]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return o(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.Light=void 0;const a=r(5468),c=s(r(4312)),u=r(8593);class f extends a.Device{constructor(e,t){super(e,t,{},c.DeviceType.LIGHT)}setBrightness(e,t=!0){return t&&this.cancelEventTimer(),new Promise((t=>(this.writeDirect(0,i.from([e])),t())))}rampBrightness(e,t,r){return this.cancelEventTimer(),new Promise((i=>{u.calculateRamp(this,e,t,r).on("changePower",(e=>{this.setBrightness(e,!1)})).on("finished",i)}))}}t.Light=f},3859:function(e,t,r){"use strict";var i=this&&this.__createBinding||(Object.create?function(e,t,r,i){void 0===i&&(i=r),Object.defineProperty(e,i,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,i){void 0===i&&(i=r),e[i]=t[r]}),n=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&i(t,e,r);return n(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.ModeMap=t.Mode=t.MarioAccelerometer=void 0;const s=r(5468),a=o(r(4312));class c extends s.Device{constructor(e,r){super(e,r,t.ModeMap,a.DeviceType.MARIO_ACCELEROMETER)}receive(e){switch(this._mode){case u.ACCEL:const t=e[4],r=e[5],i=e[6];this.notify("accel",{x:t,y:r,z:i});break;case u.GEST:const n=e[4];this.notify("gesture",{gesture:n})}}}var u;t.MarioAccelerometer=c,function(e){e[e.ACCEL=0]="ACCEL",e[e.GEST=1]="GEST"}(u=t.Mode||(t.Mode={})),t.ModeMap={accel:u.ACCEL,gesture:u.GEST}},4477:function(e,t,r){"use strict";var i=this&&this.__createBinding||(Object.create?function(e,t,r,i){void 0===i&&(i=r),Object.defineProperty(e,i,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,i){void 0===i&&(i=r),e[i]=t[r]}),n=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&i(t,e,r);return n(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.ModeMap=t.Mode=t.MarioBarcodeSensor=void 0;const s=r(5468),a=o(r(4312));class c extends s.Device{constructor(e,r){super(e,r,t.ModeMap,a.DeviceType.MARIO_BARCODE_SENSOR)}receive(e){switch(this._mode){case u.BARCODE:const t=e.readUInt16LE(4),r=e.readUInt16LE(6);65535===r?this.notify("barcode",{barcode:t}):65535===t&&this.notify("barcode",{color:r});break;case u.RGB:const i=e[4],n=e[5],o=e[6];this.notify("rgb",{r:i,g:n,b:o})}}}var u;t.MarioBarcodeSensor=c,function(e){e[e.BARCODE=0]="BARCODE",e[e.RGB=1]="RGB"}(u=t.Mode||(t.Mode={})),t.ModeMap={barcode:u.BARCODE,rgb:u.RGB}},7085:function(e,t,r){"use strict";var i=this&&this.__createBinding||(Object.create?function(e,t,r,i){void 0===i&&(i=r),Object.defineProperty(e,i,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,i){void 0===i&&(i=r),e[i]=t[r]}),n=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&i(t,e,r);return n(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.ModeMap=t.Mode=t.MarioPantsSensor=void 0;const s=r(5468),a=o(r(4312));class c extends s.Device{constructor(e,r){super(e,r,t.ModeMap,a.DeviceType.MARIO_PANTS_SENSOR)}receive(e){switch(this._mode){case u.PANTS:const t=e[4];this.notify("pants",{pants:t})}}}var u;t.MarioPantsSensor=c,function(e){e[e.PANTS=0]="PANTS"}(u=t.Mode||(t.Mode={})),t.ModeMap={pants:u.PANTS}},7375:function(e,t,r){"use strict";var i=this&&this.__createBinding||(Object.create?function(e,t,r,i){void 0===i&&(i=r),Object.defineProperty(e,i,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,i){void 0===i&&(i=r),e[i]=t[r]}),n=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&i(t,e,r);return n(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.MediumLinearMotor=void 0;const s=r(9847),a=o(r(4312));class c extends s.TachoMotor{constructor(e,t){super(e,t,{},a.DeviceType.MEDIUM_LINEAR_MOTOR)}}t.MediumLinearMotor=c},7201:function(e,t,r){"use strict";var i=this&&this.__createBinding||(Object.create?function(e,t,r,i){void 0===i&&(i=r),Object.defineProperty(e,i,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,i){void 0===i&&(i=r),e[i]=t[r]}),n=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&i(t,e,r);return n(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.ModeMap=t.Mode=t.MotionSensor=void 0;const s=r(5468),a=o(r(4312));class c extends s.Device{constructor(e,r){super(e,r,t.ModeMap,a.DeviceType.MOTION_SENSOR)}receive(e){switch(this._mode){case u.DISTANCE:let t=e[this.isWeDo2SmartHub?2:4];1===e[this.isWeDo2SmartHub?3:5]&&(t+=255),t*=10,this.notify("distance",{distance:t})}}}var u;t.MotionSensor=c,function(e){e[e.DISTANCE=0]="DISTANCE"}(u=t.Mode||(t.Mode={})),t.ModeMap={distance:u.DISTANCE}},4772:function(e,t,r){"use strict";var i=this&&this.__createBinding||(Object.create?function(e,t,r,i){void 0===i&&(i=r),Object.defineProperty(e,i,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,i){void 0===i&&(i=r),e[i]=t[r]}),n=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&i(t,e,r);return n(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.MoveHubMediumLinearMotor=void 0;const s=r(9847),a=o(r(4312));class c extends s.TachoMotor{constructor(e,t){super(e,t,{},a.DeviceType.MOVE_HUB_MEDIUM_LINEAR_MOTOR)}}t.MoveHubMediumLinearMotor=c},6227:function(e,t,r){"use strict";var i=this&&this.__createBinding||(Object.create?function(e,t,r,i){void 0===i&&(i=r),Object.defineProperty(e,i,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,i){void 0===i&&(i=r),e[i]=t[r]}),n=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&i(t,e,r);return n(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.ModeMap=t.Mode=t.MoveHubTiltSensor=void 0;const s=r(5468),a=o(r(4312));class c extends s.Device{constructor(e,r){super(e,r,t.ModeMap,a.DeviceType.MOVE_HUB_TILT_SENSOR)}receive(e){switch(this._mode){case u.TILT:const t=-e.readInt8(4),r=e.readInt8(5);this.notify("tilt",{x:t,y:r})}}}var u;t.MoveHubTiltSensor=c,function(e){e[e.TILT=0]="TILT"}(u=t.Mode||(t.Mode={})),t.ModeMap={tilt:u.TILT}},222:function(e,t,r){"use strict";var i=r(8764).Buffer,n=this&&this.__createBinding||(Object.create?function(e,t,r,i){void 0===i&&(i=r),Object.defineProperty(e,i,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,i){void 0===i&&(i=r),e[i]=t[r]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return o(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.PiezoBuzzer=void 0;const a=r(5468),c=s(r(4312));class u extends a.Device{constructor(e,t){super(e,t,{},c.DeviceType.PIEZO_BUZZER)}playTone(e,t){return new Promise((n=>{const o=i.from([5,2,4,0,0,0,0]);o.writeUInt16LE(e,3),o.writeUInt16LE(t,5),this.send(o,c.BLECharacteristic.WEDO2_MOTOR_VALUE_WRITE),r.g.setTimeout(n,t)}))}}t.PiezoBuzzer=u},3387:function(e,t,r){"use strict";var i=this&&this.__createBinding||(Object.create?function(e,t,r,i){void 0===i&&(i=r),Object.defineProperty(e,i,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,i){void 0===i&&(i=r),e[i]=t[r]}),n=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&i(t,e,r);return n(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.ButtonState=t.ModeMap=t.Mode=t.RemoteControlButton=void 0;const s=r(5468),a=o(r(4312));class c extends s.Device{constructor(e,r){super(e,r,t.ModeMap,a.DeviceType.REMOTE_CONTROL_BUTTON)}receive(e){switch(this._mode){case u.BUTTON_EVENTS:const t=e[4];this.notify("remoteButton",{event:t})}}}var u;t.RemoteControlButton=c,function(e){e[e.BUTTON_EVENTS=0]="BUTTON_EVENTS"}(u=t.Mode||(t.Mode={})),t.ModeMap={remoteButton:u.BUTTON_EVENTS},t.ButtonState={UP:1,DOWN:255,STOP:127,RELEASED:0}},3652:function(e,t,r){"use strict";var i=this&&this.__createBinding||(Object.create?function(e,t,r,i){void 0===i&&(i=r),Object.defineProperty(e,i,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,i){void 0===i&&(i=r),e[i]=t[r]}),n=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&i(t,e,r);return n(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.SimpleMediumLinearMotor=void 0;const s=r(2897),a=o(r(4312));class c extends s.BasicMotor{constructor(e,t){super(e,t,{},a.DeviceType.SIMPLE_MEDIUM_LINEAR_MOTOR)}}t.SimpleMediumLinearMotor=c},9847:function(e,t,r){"use strict";var i=r(8764).Buffer,n=this&&this.__createBinding||(Object.create?function(e,t,r,i){void 0===i&&(i=r),Object.defineProperty(e,i,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,i){void 0===i&&(i=r),e[i]=t[r]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return o(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.ModeMap=t.Mode=t.TachoMotor=void 0;const a=r(2897),c=s(r(4312)),u=r(8593);class f extends a.BasicMotor{constructor(e,r,i={},n=c.DeviceType.UNKNOWN){super(e,r,Object.assign({},i,t.ModeMap),n),this._brakeStyle=c.BrakingStyle.BRAKE,this._maxPower=100,this.useAccelerationProfile=!0,this.useDecelerationProfile=!0}receive(e){switch(this._mode){case l.ROTATION:const t=e.readInt32LE(this.isWeDo2SmartHub?2:4);this.notify("rotate",{degrees:t})}}setBrakingStyle(e){this._brakeStyle=e}setMaxPower(e){this._maxPower=e}setAccelerationTime(e,t=0){const r=i.from([129,this.portId,17,5,0,0,t]);r.writeUInt16LE(e,4),this.send(r)}setDecelerationTime(e,t=0){const r=i.from([129,this.portId,17,6,0,0,t]);r.writeUInt16LE(e,4),this.send(r)}setSpeed(e,t){if(!this.isVirtualPort&&e instanceof Array)throw new Error("Only virtual ports can accept multiple speeds");if(this.isWeDo2SmartHub)throw new Error("Motor speed is not available on the WeDo 2.0 Smart Hub");return this.cancelEventTimer(),new Promise((r=>{let n;null==e&&(e=100),void 0!==t?(n=e instanceof Array?i.from([129,this.portId,17,10,0,0,u.mapSpeed(e[0]),u.mapSpeed(e[1]),this._maxPower,this._brakeStyle,this.useProfile()]):i.from([129,this.portId,17,9,0,0,u.mapSpeed(e),this._maxPower,this._brakeStyle,this.useProfile()]),n.writeUInt16LE(t,4)):n=e instanceof Array?i.from([129,this.portId,17,8,u.mapSpeed(e[0]),u.mapSpeed(e[1]),this._maxPower,this.useProfile()]):i.from([129,this.portId,17,7,u.mapSpeed(e),this._maxPower,this.useProfile()]),this.send(n),this._finishedCallbacks.push((()=>r()))}))}rotateByDegrees(e,t){if(!this.isVirtualPort&&t instanceof Array)throw new Error("Only virtual ports can accept multiple speeds");if(this.isWeDo2SmartHub)throw new Error("Rotation is not available on the WeDo 2.0 Smart Hub");return this.cancelEventTimer(),new Promise((r=>{let n;null==t&&(t=100),n=t instanceof Array?i.from([129,this.portId,17,12,0,0,0,0,u.mapSpeed(t[0]),u.mapSpeed(t[1]),this._maxPower,this._brakeStyle,this.useProfile()]):i.from([129,this.portId,17,11,0,0,0,0,u.mapSpeed(t),this._maxPower,this._brakeStyle,this.useProfile()]),n.writeUInt32LE(e,4),this.send(n),this._finishedCallbacks.push((()=>r()))}))}useProfile(){let e=0;return this.useAccelerationProfile&&(e+=1),this.useDecelerationProfile&&(e+=2),e}}var l;t.TachoMotor=f,function(e){e[e.ROTATION=2]="ROTATION"}(l=t.Mode||(t.Mode={})),t.ModeMap={rotate:l.ROTATION}},6481:function(e,t,r){"use strict";var i=r(8764).Buffer,n=this&&this.__createBinding||(Object.create?function(e,t,r,i){void 0===i&&(i=r),Object.defineProperty(e,i,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,i){void 0===i&&(i=r),e[i]=t[r]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return o(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.ModeMap=t.Mode=t.TechnicColorSensor=void 0;const a=r(5468),c=s(r(4312));class u extends a.Device{constructor(e,r){super(e,r,t.ModeMap,c.DeviceType.TECHNIC_COLOR_SENSOR)}receive(e){switch(this._mode){case f.COLOR:if(e[4]<=10){const t=e[4];this.notify("color",{color:t})}break;case f.REFLECTIVITY:const t=e[4];this.notify("reflect",{reflect:t});break;case f.AMBIENT_LIGHT:const r=e[4];this.notify("ambient",{ambient:r})}}setBrightness(e,t,r){this.writeDirect(3,i.from([e,t,r]))}}var f;t.TechnicColorSensor=u,function(e){e[e.COLOR=0]="COLOR",e[e.REFLECTIVITY=1]="REFLECTIVITY",e[e.AMBIENT_LIGHT=2]="AMBIENT_LIGHT"}(f=t.Mode||(t.Mode={})),t.ModeMap={color:f.COLOR,reflect:f.REFLECTIVITY,ambient:f.AMBIENT_LIGHT}},6147:function(e,t,r){"use strict";var i=r(8764).Buffer,n=this&&this.__createBinding||(Object.create?function(e,t,r,i){void 0===i&&(i=r),Object.defineProperty(e,i,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,i){void 0===i&&(i=r),e[i]=t[r]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return o(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.ModeMap=t.Mode=t.TechnicDistanceSensor=void 0;const a=r(5468),c=s(r(4312));class u extends a.Device{constructor(e,r){super(e,r,t.ModeMap,c.DeviceType.TECHNIC_DISTANCE_SENSOR)}receive(e){switch(this._mode){case f.DISTANCE:const t=e.readUInt16LE(4);this.notify("distance",{distance:t});break;case f.FAST_DISTANCE:const r=e.readUInt16LE(4);this.notify("fastDistance",{fastDistance:r})}}setBrightness(e,t,r,n){this.writeDirect(5,i.from([e,r,t,n]))}}var f;t.TechnicDistanceSensor=u,function(e){e[e.DISTANCE=0]="DISTANCE",e[e.FAST_DISTANCE=1]="FAST_DISTANCE"}(f=t.Mode||(t.Mode={})),t.ModeMap={distance:f.DISTANCE,fastDistance:f.FAST_DISTANCE}},2826:function(e,t,r){"use strict";var i=this&&this.__createBinding||(Object.create?function(e,t,r,i){void 0===i&&(i=r),Object.defineProperty(e,i,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,i){void 0===i&&(i=r),e[i]=t[r]}),n=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&i(t,e,r);return n(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.ModeMap=t.Mode=t.TechnicForceSensor=void 0;const s=r(5468),a=o(r(4312));class c extends s.Device{constructor(e,r){super(e,r,t.ModeMap,a.DeviceType.TECHNIC_FORCE_SENSOR)}receive(e){switch(this._mode){case u.FORCE:const t=e[this.isWeDo2SmartHub?2:4]/10;this.notify("force",{force:t});break;case u.TOUCHED:const r=!!e[4];this.notify("touched",{touched:r});break;case u.TAPPED:const i=e[4];this.notify("tapped",{tapped:i})}}}var u;t.TechnicForceSensor=c,function(e){e[e.FORCE=0]="FORCE",e[e.TOUCHED=1]="TOUCHED",e[e.TAPPED=2]="TAPPED"}(u=t.Mode||(t.Mode={})),t.ModeMap={force:u.FORCE,touched:u.TOUCHED,tapped:u.TAPPED}},2667:function(e,t,r){"use strict";var i=this&&this.__createBinding||(Object.create?function(e,t,r,i){void 0===i&&(i=r),Object.defineProperty(e,i,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,i){void 0===i&&(i=r),e[i]=t[r]}),n=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&i(t,e,r);return n(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.TechnicLargeAngularMotor=void 0;const s=r(9045),a=o(r(4312));class c extends s.AbsoluteMotor{constructor(e,t,r={},i=a.DeviceType.TECHNIC_LARGE_ANGULAR_MOTOR){super(e,t,{},i)}}t.TechnicLargeAngularMotor=c},1665:function(e,t,r){"use strict";var i=this&&this.__createBinding||(Object.create?function(e,t,r,i){void 0===i&&(i=r),Object.defineProperty(e,i,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,i){void 0===i&&(i=r),e[i]=t[r]}),n=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&i(t,e,r);return n(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.TechnicLargeLinearMotor=void 0;const s=r(9045),a=o(r(4312));class c extends s.AbsoluteMotor{constructor(e,t){super(e,t,{},a.DeviceType.TECHNIC_LARGE_LINEAR_MOTOR)}}t.TechnicLargeLinearMotor=c},3841:function(e,t,r){"use strict";var i=this&&this.__createBinding||(Object.create?function(e,t,r,i){void 0===i&&(i=r),Object.defineProperty(e,i,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,i){void 0===i&&(i=r),e[i]=t[r]}),n=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&i(t,e,r);return n(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.TechnicMediumAngularMotor=void 0;const s=r(9045),a=o(r(4312));class c extends s.AbsoluteMotor{constructor(e,t,r={},i=a.DeviceType.TECHNIC_MEDIUM_ANGULAR_MOTOR){super(e,t,{},i)}}t.TechnicMediumAngularMotor=c},4321:function(e,t,r){"use strict";var i=this&&this.__createBinding||(Object.create?function(e,t,r,i){void 0===i&&(i=r),Object.defineProperty(e,i,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,i){void 0===i&&(i=r),e[i]=t[r]}),n=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&i(t,e,r);return n(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.ModeMap=t.Mode=t.TechnicMediumHubAccelerometerSensor=void 0;const s=r(5468),a=o(r(4312));class c extends s.Device{constructor(e,r){super(e,r,t.ModeMap,a.DeviceType.TECHNIC_MEDIUM_HUB_ACCELEROMETER)}receive(e){switch(this._mode){case u.ACCEL:const t=Math.round(e.readInt16LE(4)/4.096),r=Math.round(e.readInt16LE(6)/4.096),i=Math.round(e.readInt16LE(8)/4.096);this.notify("accel",{x:t,y:r,z:i})}}}var u;t.TechnicMediumHubAccelerometerSensor=c,function(e){e[e.ACCEL=0]="ACCEL"}(u=t.Mode||(t.Mode={})),t.ModeMap={accel:u.ACCEL}},8425:function(e,t,r){"use strict";var i=this&&this.__createBinding||(Object.create?function(e,t,r,i){void 0===i&&(i=r),Object.defineProperty(e,i,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,i){void 0===i&&(i=r),e[i]=t[r]}),n=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&i(t,e,r);return n(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.ModeMap=t.Mode=t.TechnicMediumHubGyroSensor=void 0;const s=r(5468),a=o(r(4312));class c extends s.Device{constructor(e,r){super(e,r,t.ModeMap,a.DeviceType.TECHNIC_MEDIUM_HUB_GYRO_SENSOR)}receive(e){switch(this._mode){case u.GYRO:const t=Math.round(7*e.readInt16LE(4)/400),r=Math.round(7*e.readInt16LE(6)/400),i=Math.round(7*e.readInt16LE(8)/400);this.notify("gyro",{x:t,y:r,z:i})}}}var u;t.TechnicMediumHubGyroSensor=c,function(e){e[e.GYRO=0]="GYRO"}(u=t.Mode||(t.Mode={})),t.ModeMap={gyro:u.GYRO}},2644:function(e,t,r){"use strict";var i=this&&this.__createBinding||(Object.create?function(e,t,r,i){void 0===i&&(i=r),Object.defineProperty(e,i,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,i){void 0===i&&(i=r),e[i]=t[r]}),n=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&i(t,e,r);return n(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.ModeMap=t.Mode=t.TechnicMediumHubTiltSensor=void 0;const s=r(5468),a=o(r(4312));class c extends s.Device{constructor(e,r){super(e,r,t.ModeMap,a.DeviceType.TECHNIC_MEDIUM_HUB_TILT_SENSOR)}receive(e){switch(this._mode){case u.TILT:const t=-e.readInt16LE(4),r=e.readInt16LE(6),i=e.readInt16LE(8);this.notify("tilt",{x:i,y:r,z:t})}}}var u;t.TechnicMediumHubTiltSensor=c,function(e){e[e.TILT=0]="TILT"}(u=t.Mode||(t.Mode={})),t.ModeMap={tilt:u.TILT}},6121:function(e,t,r){"use strict";var i=this&&this.__createBinding||(Object.create?function(e,t,r,i){void 0===i&&(i=r),Object.defineProperty(e,i,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,i){void 0===i&&(i=r),e[i]=t[r]}),n=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&i(t,e,r);return n(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.TechnicXLargeLinearMotor=void 0;const s=r(9045),a=o(r(4312));class c extends s.AbsoluteMotor{constructor(e,t){super(e,t,{},a.DeviceType.TECHNIC_XLARGE_LINEAR_MOTOR)}}t.TechnicXLargeLinearMotor=c},8762:function(e,t,r){"use strict";var i=this&&this.__createBinding||(Object.create?function(e,t,r,i){void 0===i&&(i=r),Object.defineProperty(e,i,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,i){void 0===i&&(i=r),e[i]=t[r]}),n=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&i(t,e,r);return n(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.ModeMap=t.Mode=t.TiltSensor=void 0;const s=r(5468),a=o(r(4312));class c extends s.Device{constructor(e,r){super(e,r,t.ModeMap,a.DeviceType.TILT_SENSOR)}receive(e){switch(this._mode){case u.TILT:const t=e.readInt8(this.isWeDo2SmartHub?2:4),r=e.readInt8(this.isWeDo2SmartHub?3:5);this.notify("tilt",{x:t,y:r})}}}var u;t.TiltSensor=c,function(e){e[e.TILT=0]="TILT"}(u=t.Mode||(t.Mode={})),t.ModeMap={tilt:u.TILT}},8036:function(e,t,r){"use strict";var i=this&&this.__createBinding||(Object.create?function(e,t,r,i){void 0===i&&(i=r),Object.defineProperty(e,i,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,i){void 0===i&&(i=r),e[i]=t[r]}),n=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&i(t,e,r);return n(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.TrainMotor=void 0;const s=r(2897),a=o(r(4312));class c extends s.BasicMotor{constructor(e,t){super(e,t,{},a.DeviceType.TRAIN_MOTOR)}}t.TrainMotor=c},9257:function(e,t,r){"use strict";var i=this&&this.__createBinding||(Object.create?function(e,t,r,i){void 0===i&&(i=r),Object.defineProperty(e,i,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,i){void 0===i&&(i=r),e[i]=t[r]}),n=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&i(t,e,r);return n(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.ModeMap=t.Mode=t.VoltageSensor=void 0;const s=r(5468),a=o(r(4312));class c extends s.Device{constructor(e,r){super(e,r,t.ModeMap,a.DeviceType.VOLTAGE_SENSOR)}receive(e){switch(this._mode){case u.VOLTAGE:if(this.isWeDo2SmartHub){const t=e.readInt16LE(2)/40;this.notify("voltage",{voltage:t})}else{let t=f[this.hub.type];void 0===t&&(t=f[a.HubType.UNKNOWN]);let r=l[this.hub.type];void 0===r&&(r=l[a.HubType.UNKNOWN]);const i=e.readUInt16LE(4)*t/r;this.notify("voltage",{voltage:i})}}}}var u;t.VoltageSensor=c,function(e){e[e.VOLTAGE=0]="VOLTAGE"}(u=t.Mode||(t.Mode={})),t.ModeMap={voltage:u.VOLTAGE};const f={[a.HubType.UNKNOWN]:9.615,[a.HubType.DUPLO_TRAIN_BASE]:6.4,[a.HubType.REMOTE_CONTROL]:6.4},l={[a.HubType.UNKNOWN]:3893,[a.HubType.DUPLO_TRAIN_BASE]:3047,[a.HubType.REMOTE_CONTROL]:3200,[a.HubType.TECHNIC_MEDIUM_HUB]:4095}},6503:function(e,t,r){"use strict";var i=this&&this.__createBinding||(Object.create?function(e,t,r,i){void 0===i&&(i=r),Object.defineProperty(e,i,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,i){void 0===i&&(i=r),e[i]=t[r]}),n=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&i(t,e,r);return n(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.BaseHub=void 0;const s=r(7187),a=r(9126),c=r(4499),u=r(5468),f=r(1718),l=r(9539),_=r(6758),h=r(1668),d=r(783),p=r(3677),E=r(3859),O=r(4477),T=r(7085),b=r(7375),M=r(7201),v=r(4772),y=r(6227),R=r(222),m=r(3387),S=r(3652),A=r(6481),I=r(6147),L=r(2826),D=r(2667),g=r(1665),C=r(3841),N=r(4321),P=r(8425),B=r(2644),U=r(6121),w=r(8762),H=r(8036),F=r(9257),j=o(r(4312)),W=r(1227)("basehub");class G extends s.EventEmitter{constructor(e,t={},r=j.HubType.UNKNOWN){super(),this._attachedDevices={},this._name="",this._firmwareVersion="0.0.00.0000",this._hardwareVersion="0.0.00.0000",this._primaryMACAddress="00:00:00:00:00:00",this._batteryLevel=100,this._rssi=-60,this._portMap={},this._virtualPorts=[],this._attachCallbacks=[],this.setMaxListeners(23),this._type=r,this._bleDevice=e,this._portMap=Object.assign({},t),e.on("disconnect",(()=>{this.emit("disconnect")}))}get name(){return this._bleDevice.name}get type(){return this._type}get ports(){return Object.keys(this._portMap)}get firmwareVersion(){return this._firmwareVersion}get hardwareVersion(){return this._hardwareVersion}get primaryMACAddress(){return this._primaryMACAddress}get uuid(){return this._bleDevice.uuid}get batteryLevel(){return this._batteryLevel}get rssi(){return this._rssi}connect(){if(this._bleDevice.connecting)throw new Error("Already connecting");if(this._bleDevice.connected)throw new Error("Already connected");return this._bleDevice.connect()}disconnect(){return this._bleDevice.disconnect()}getDeviceAtPort(e){const t=this._portMap[e];return void 0!==t?this._attachedDevices[t]:void 0}waitForDeviceAtPort(e){return new Promise((t=>{const r=this.getDeviceAtPort(e);if(r)return t(r);this._attachCallbacks.push((r=>r.portName===e&&(t(r),!0)))}))}getDevices(){return Object.values(this._attachedDevices)}getDevicesByType(e){return this.getDevices().filter((t=>t.type===e))}waitForDeviceByType(e){return new Promise((t=>{const r=this.getDevicesByType(e);if(r.length>=1)return t(r[0]);this._attachCallbacks.push((r=>r.type===e&&(t(r),!0)))}))}getPortNameForPortId(e){for(const t of Object.keys(this._portMap))if(this._portMap[t]===e)return t}isPortVirtual(e){return this._virtualPorts.indexOf(e)>-1}sleep(e){return new Promise((t=>{r.g.setTimeout(t,e)}))}wait(e){return Promise.all(e)}send(e,t){return Promise.resolve()}subscribe(e,t,r){}unsubscribe(e,t,r){}manuallyAttachDevice(e,t){if(this._attachedDevices[t]){if(this._attachedDevices[t].type===e)return W(`Device of ${e} already attached to portId ${t}, returning existing device`),this._attachedDevices[t];throw new Error(`Already a different type of device attached to portId ${t}. Only use this method when you are certain what's attached.`)}{W(`No device attached to portId ${t}, creating and attaching device type ${e}`);const r=this._createDevice(e,t);return this._attachDevice(r),r}}_attachDevice(e){if(this._attachedDevices[e.portId]&&this._attachedDevices[e.portId].type===e.type)return;this._attachedDevices[e.portId]=e,this.emit("attach",e),W(`Attached device type ${e.type} (${j.DeviceTypeNames[e.type]}) on port ${e.portName} (${e.portId})`);let t=this._attachCallbacks.length;for(;t--;)(0,this._attachCallbacks[t])(e)&&this._attachCallbacks.splice(t,1)}_detachDevice(e){delete this._attachedDevices[e.portId],this.emit("detach",e),W(`Detached device type ${e.type} (${j.DeviceTypeNames[e.type]}) on port ${e.portName} (${e.portId})`)}_createDevice(e,t){let r;return r={[j.DeviceType.LIGHT]:p.Light,[j.DeviceType.TRAIN_MOTOR]:H.TrainMotor,[j.DeviceType.SIMPLE_MEDIUM_LINEAR_MOTOR]:S.SimpleMediumLinearMotor,[j.DeviceType.MOVE_HUB_MEDIUM_LINEAR_MOTOR]:v.MoveHubMediumLinearMotor,[j.DeviceType.MOTION_SENSOR]:M.MotionSensor,[j.DeviceType.TILT_SENSOR]:w.TiltSensor,[j.DeviceType.MOVE_HUB_TILT_SENSOR]:y.MoveHubTiltSensor,[j.DeviceType.PIEZO_BUZZER]:R.PiezoBuzzer,[j.DeviceType.TECHNIC_COLOR_SENSOR]:A.TechnicColorSensor,[j.DeviceType.TECHNIC_DISTANCE_SENSOR]:I.TechnicDistanceSensor,[j.DeviceType.TECHNIC_FORCE_SENSOR]:L.TechnicForceSensor,[j.DeviceType.TECHNIC_MEDIUM_HUB_TILT_SENSOR]:B.TechnicMediumHubTiltSensor,[j.DeviceType.TECHNIC_MEDIUM_HUB_GYRO_SENSOR]:P.TechnicMediumHubGyroSensor,[j.DeviceType.TECHNIC_MEDIUM_HUB_ACCELEROMETER]:N.TechnicMediumHubAccelerometerSensor,[j.DeviceType.MEDIUM_LINEAR_MOTOR]:b.MediumLinearMotor,[j.DeviceType.TECHNIC_MEDIUM_ANGULAR_MOTOR]:C.TechnicMediumAngularMotor,[j.DeviceType.TECHNIC_LARGE_ANGULAR_MOTOR]:D.TechnicLargeAngularMotor,[j.DeviceType.TECHNIC_LARGE_LINEAR_MOTOR]:g.TechnicLargeLinearMotor,[j.DeviceType.TECHNIC_XLARGE_LINEAR_MOTOR]:U.TechnicXLargeLinearMotor,[j.DeviceType.COLOR_DISTANCE_SENSOR]:a.ColorDistanceSensor,[j.DeviceType.VOLTAGE_SENSOR]:F.VoltageSensor,[j.DeviceType.CURRENT_SENSOR]:c.CurrentSensor,[j.DeviceType.REMOTE_CONTROL_BUTTON]:m.RemoteControlButton,[j.DeviceType.HUB_LED]:d.HubLED,[j.DeviceType.DUPLO_TRAIN_BASE_COLOR_SENSOR]:f.DuploTrainBaseColorSensor,[j.DeviceType.DUPLO_TRAIN_BASE_MOTOR]:l.DuploTrainBaseMotor,[j.DeviceType.DUPLO_TRAIN_BASE_SPEAKER]:_.DuploTrainBaseSpeaker,[j.DeviceType.DUPLO_TRAIN_BASE_SPEEDOMETER]:h.DuploTrainBaseSpeedometer,[j.DeviceType.MARIO_ACCELEROMETER]:E.MarioAccelerometer,[j.DeviceType.MARIO_BARCODE_SENSOR]:O.MarioBarcodeSensor,[j.DeviceType.MARIO_PANTS_SENSOR]:T.MarioPantsSensor,[j.DeviceType.TECHNIC_MEDIUM_ANGULAR_MOTOR_GREY]:C.TechnicMediumAngularMotor,[j.DeviceType.TECHNIC_LARGE_ANGULAR_MOTOR_GREY]:D.TechnicLargeAngularMotor}[e],r?new r(this,t,void 0,e):new u.Device(this,t,void 0,e)}_getDeviceByPortId(e){return this._attachedDevices[e]}}t.BaseHub=G},5688:function(e,t,r){"use strict";var i=this&&this.__createBinding||(Object.create?function(e,t,r,i){void 0===i&&(i=r),Object.defineProperty(e,i,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,i){void 0===i&&(i=r),e[i]=t[r]}),n=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&i(t,e,r);return n(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.PortMap=t.DuploTrainBase=void 0;const s=r(551),a=o(r(4312)),c=r(1227)("duplotrainbase");class u extends s.LPF2Hub{static IsDuploTrainBase(e){return e.advertisement&&e.advertisement.serviceUuids&&e.advertisement.serviceUuids.indexOf(a.BLEService.LPF2_HUB.replace(/-/g,""))>=0&&e.advertisement.manufacturerData&&e.advertisement.manufacturerData.length>3&&e.advertisement.manufacturerData[3]===a.BLEManufacturerData.DUPLO_TRAIN_BASE_ID}constructor(e){super(e,t.PortMap,a.HubType.DUPLO_TRAIN_BASE),c("Discovered Duplo Train Base")}async connect(){c("Connecting to Duplo Train Base"),await super.connect(),c("Connect completed")}}t.DuploTrainBase=u,t.PortMap={MOTOR:0,COLOR:18,SPEEDOMETER:19}},8647:function(e,t,r){"use strict";var i=this&&this.__createBinding||(Object.create?function(e,t,r,i){void 0===i&&(i=r),Object.defineProperty(e,i,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,i){void 0===i&&(i=r),e[i]=t[r]}),n=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&i(t,e,r);return n(t,e),t},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.PortMap=t.Hub=void 0;const a=s(r(4247)),c=r(551),u=o(r(4312)),f=r(1227)("hub");class l extends c.LPF2Hub{constructor(e){super(e,t.PortMap,u.HubType.HUB),this._currentPort=59,f("Discovered Powered UP Hub")}static IsHub(e){return e.advertisement&&e.advertisement.serviceUuids&&e.advertisement.serviceUuids.indexOf(u.BLEService.LPF2_HUB.replace(/-/g,""))>=0&&e.advertisement.manufacturerData&&e.advertisement.manufacturerData.length>3&&e.advertisement.manufacturerData[3]===u.BLEManufacturerData.HUB_ID}async connect(){f("Connecting to Powered UP Hub"),await super.connect(),f("Connect completed")}_checkFirmware(e){if(1===a.default("1.1.00.0004",e))throw new Error(`Your Powered Up Hub's (${this.name}) firmware is out of date and unsupported by this library. Please update it via the official Powered Up app.`)}}t.Hub=l,t.PortMap={A:0,B:1,HUB_LED:50,CURRENT_SENSOR:59,VOLTAGE_SENSOR:60}},551:function(e,t,r){"use strict";var i=r(8764).Buffer,n=this&&this.__createBinding||(Object.create?function(e,t,r,i){void 0===i&&(i=r),Object.defineProperty(e,i,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,i){void 0===i&&(i=r),e[i]=t[r]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return o(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.LPF2Hub=void 0;const a=r(6503),c=s(r(4312)),u=r(8593),f=r(1227),l=f("lpf2hub"),_=f("lpf2hubmodeinfo");class h extends a.BaseHub{constructor(){super(...arguments),this._messageBuffer=i.alloc(0),this._propertyRequestCallbacks={}}async connect(){l("LPF2Hub connecting"),await super.connect(),await this._bleDevice.discoverCharacteristicsForService(c.BLEService.LPF2_HUB),this._bleDevice.subscribeToCharacteristic(c.BLECharacteristic.LPF2_ALL,this._parseMessage.bind(this)),await this._requestHubPropertyReports(c.HubPropertyPayload.BUTTON_STATE),await this._requestHubPropertyValue(c.HubPropertyPayload.FW_VERSION),await this._requestHubPropertyValue(c.HubPropertyPayload.HW_VERSION),await this._requestHubPropertyReports(c.HubPropertyPayload.RSSI),await this._requestHubPropertyReports(c.HubPropertyPayload.BATTERY_VOLTAGE),await this._requestHubPropertyValue(c.HubPropertyPayload.PRIMARY_MAC_ADDRESS),this.emit("connect"),l("LPF2Hub connected")}shutdown(){return this.send(i.from([2,1]),c.BLECharacteristic.LPF2_ALL)}async setName(e){if(e.length>14)throw new Error("Name must be 14 characters or less");let t=i.from([1,1,1]);t=i.concat([t,i.from(e,"ascii")]),await this.send(t,c.BLECharacteristic.LPF2_ALL),await this.send(t,c.BLECharacteristic.LPF2_ALL),this._name=e}send(e,t){return(e=i.concat([i.alloc(2),e]))[0]=e.length,l("Sent Message (LPF2_ALL)",e),this._bleDevice.writeToCharacteristic(t,e)}subscribe(e,t,r){return this.send(i.from([65,e,r,1,0,0,0,1]),c.BLECharacteristic.LPF2_ALL)}unsubscribe(e,t){return this.send(i.from([65,e,t,1,0,0,0,0]),c.BLECharacteristic.LPF2_ALL)}createVirtualPort(e,t){const r=this.getDeviceAtPort(e);if(!r)throw new Error(`Port ${e} does not have an attached device`);const n=this.getDeviceAtPort(t);if(!n)throw new Error(`Port ${t} does not have an attached device`);if(r.type!==n.type)throw new Error("Both devices must be of the same type to create a virtual port");return this.send(i.from([97,1,r.portId,n.portId]),c.BLECharacteristic.LPF2_ALL)}_checkFirmware(e){}_parseMessage(e){if(e&&(this._messageBuffer=i.concat([this._messageBuffer,e])),this._messageBuffer.length<=0)return;const t=this._messageBuffer[0];if(t<=this._messageBuffer.length){const e=this._messageBuffer.slice(0,t);switch(this._messageBuffer=this._messageBuffer.slice(t),l("Received Message (LPF2_ALL)",e),e[2]){case c.MessageType.HUB_PROPERTIES:{const t=e[3],r=this._propertyRequestCallbacks[t];r?r(e):this._parseHubPropertyResponse(e),delete this._propertyRequestCallbacks[t];break}case c.MessageType.HUB_ATTACHED_IO:this._parsePortMessage(e);break;case c.MessageType.PORT_INFORMATION:this._parsePortInformationResponse(e);break;case c.MessageType.PORT_MODE_INFORMATION:this._parseModeInformationResponse(e);break;case c.MessageType.PORT_VALUE_SINGLE:this._parseSensorMessage(e);break;case c.MessageType.PORT_OUTPUT_COMMAND_FEEDBACK:this._parsePortAction(e)}this._messageBuffer.length>0&&this._parseMessage()}}_requestHubPropertyValue(e){return new Promise((t=>{this._propertyRequestCallbacks[e]=e=>(this._parseHubPropertyResponse(e),t()),this.send(i.from([1,e,5]),c.BLECharacteristic.LPF2_ALL)}))}_requestHubPropertyReports(e){return this.send(i.from([1,e,2]),c.BLECharacteristic.LPF2_ALL)}_parseHubPropertyResponse(e){if(e[3]===c.HubPropertyPayload.BUTTON_STATE){if(1===e[5])return void this.emit("button",{event:c.ButtonState.PRESSED});if(0===e[5])return void this.emit("button",{event:c.ButtonState.RELEASED})}else if(e[3]===c.HubPropertyPayload.FW_VERSION)this._firmwareVersion=u.decodeVersion(e.readInt32LE(5)),this._checkFirmware(this._firmwareVersion);else if(e[3]===c.HubPropertyPayload.HW_VERSION)this._hardwareVersion=u.decodeVersion(e.readInt32LE(5));else if(e[3]===c.HubPropertyPayload.RSSI){const t=e.readInt8(5);0!==t&&(this._rssi=t,this.emit("rssi",{rssi:this._rssi}))}else if(e[3]===c.HubPropertyPayload.PRIMARY_MAC_ADDRESS)this._primaryMACAddress=u.decodeMACAddress(e.slice(5));else if(e[3]===c.HubPropertyPayload.BATTERY_VOLTAGE){const t=e[5];t!==this._batteryLevel&&(this._batteryLevel=t,this.emit("batteryLevel",{batteryLevel:t}))}}async _parsePortMessage(e){const t=e[3],r=e[4],i=r?e.readUInt16LE(5):0;if(r===c.AlertPayload.ATTACHED_IO){if(_.enabled){const r=c.DeviceTypeNames[e[5]]||"Unknown";_(`Port ${u.toHex(t)}, type ${u.toHex(i,4)} (${r})`);const n=u.decodeVersion(e.readInt32LE(7)),o=u.decodeVersion(e.readInt32LE(11));_(`Port ${u.toHex(t)}, hardware version ${n}, software version ${o}`),await this._sendPortInformationRequest(t)}const r=this._createDevice(i,t);this._attachDevice(r)}else if(r===c.AlertPayload.DETACHED_IO){const e=this._getDeviceByPortId(t);if(e&&(this._detachDevice(e),this.isPortVirtual(t))){const e=this.getPortNameForPortId(t);e&&delete this._portMap[e],this._virtualPorts=this._virtualPorts.filter((e=>e!==t))}}else if(r===c.AlertPayload.ATTACHED_VIRTUAL_IO){const t=this.getPortNameForPortId(e[7])+this.getPortNameForPortId(e[8]),r=e[3];this._portMap[t]=r,this._virtualPorts.push(r);const n=this._createDevice(i,r);this._attachDevice(n)}}async _sendPortInformationRequest(e){await this.send(i.from([33,e,1]),c.BLECharacteristic.LPF2_ALL),await this.send(i.from([33,e,2]),c.BLECharacteristic.LPF2_ALL)}async _parsePortInformationResponse(e){const t=e[3];if(2===e[4]){const r=[];for(let t=5;t<e.length;t+=2)r.push(e.readUInt16LE(t));return void _(`Port ${u.toHex(t)}, mode combinations [${r.map((e=>u.toBin(e,0))).join(", ")}]`)}const r=e[6],i=u.toBin(e.readUInt16LE(7),r),n=u.toBin(e.readUInt16LE(9),r);_(`Port ${u.toHex(t)}, total modes ${r}, input modes ${i}, output modes ${n}`);for(let e=0;e<r;e++)await this._sendModeInformationRequest(t,e,c.ModeInformationType.NAME),await this._sendModeInformationRequest(t,e,c.ModeInformationType.RAW),await this._sendModeInformationRequest(t,e,c.ModeInformationType.PCT),await this._sendModeInformationRequest(t,e,c.ModeInformationType.SI),await this._sendModeInformationRequest(t,e,c.ModeInformationType.SYMBOL),await this._sendModeInformationRequest(t,e,c.ModeInformationType.VALUE_FORMAT)}_sendModeInformationRequest(e,t,r){return this.send(i.from([34,e,t,r]),c.BLECharacteristic.LPF2_ALL)}_parseModeInformationResponse(e){const t=u.toHex(e[3]),r=e[4];switch(e[5]){case c.ModeInformationType.NAME:_(`Port ${t}, mode ${r}, name ${e.slice(6,e.length).toString()}`);break;case c.ModeInformationType.RAW:_(`Port ${t}, mode ${r}, RAW min ${e.readFloatLE(6)}, max ${e.readFloatLE(10)}`);break;case c.ModeInformationType.PCT:_(`Port ${t}, mode ${r}, PCT min ${e.readFloatLE(6)}, max ${e.readFloatLE(10)}`);break;case c.ModeInformationType.SI:_(`Port ${t}, mode ${r}, SI min ${e.readFloatLE(6)}, max ${e.readFloatLE(10)}`);break;case c.ModeInformationType.SYMBOL:_(`Port ${t}, mode ${r}, SI symbol ${e.slice(6,e.length).toString()}`);break;case c.ModeInformationType.VALUE_FORMAT:const i=e[6],n=["8bit","16bit","32bit","float"][e[7]],o=e[8],s=e[9];_(`Port ${t}, mode ${r}, Value ${i} x ${n}, Decimal format ${o}.${s}`)}}_parsePortAction(e){const t=e[3],r=this._getDeviceByPortId(t);r&&r.finish(e[4])}_parseSensorMessage(e){const t=e[3],r=this._getDeviceByPortId(t);r&&r.receive(e)}}t.LPF2Hub=h},9279:function(e,t,r){"use strict";var i=this&&this.__createBinding||(Object.create?function(e,t,r,i){void 0===i&&(i=r),Object.defineProperty(e,i,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,i){void 0===i&&(i=r),e[i]=t[r]}),n=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&i(t,e,r);return n(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.PortMap=t.Mario=void 0;const s=r(551),a=o(r(4312)),c=r(1227)("movehub");class u extends s.LPF2Hub{static IsMario(e){return e.advertisement&&e.advertisement.serviceUuids&&e.advertisement.serviceUuids.indexOf(a.BLEService.LPF2_HUB.replace(/-/g,""))>=0&&e.advertisement.manufacturerData&&e.advertisement.manufacturerData.length>3&&e.advertisement.manufacturerData[3]===a.BLEManufacturerData.MARIO_ID}constructor(e){super(e,t.PortMap,a.HubType.MARIO),c("Discovered Mario")}async connect(){c("Connecting to Mario"),await super.connect(),c("Connect completed")}}t.Mario=u,t.PortMap={}},9556:function(e,t,r){"use strict";var i=this&&this.__createBinding||(Object.create?function(e,t,r,i){void 0===i&&(i=r),Object.defineProperty(e,i,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,i){void 0===i&&(i=r),e[i]=t[r]}),n=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&i(t,e,r);return n(t,e),t},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.PortMap=t.MoveHub=void 0;const a=s(r(4247)),c=r(551),u=o(r(4312)),f=r(1227)("movehub");class l extends c.LPF2Hub{static IsMoveHub(e){return e.advertisement&&e.advertisement.serviceUuids&&e.advertisement.serviceUuids.indexOf(u.BLEService.LPF2_HUB.replace(/-/g,""))>=0&&e.advertisement.manufacturerData&&e.advertisement.manufacturerData.length>3&&e.advertisement.manufacturerData[3]===u.BLEManufacturerData.MOVE_HUB_ID}constructor(e){super(e,t.PortMap,u.HubType.MOVE_HUB),f("Discovered Move Hub")}async connect(){f("Connecting to Move Hub"),await super.connect(),f("Connect completed")}_checkFirmware(e){if(1===a.default("2.0.00.0017",e))throw new Error(`Your Move Hub's (${this.name}) firmware is out of date and unsupported by this library. Please update it via the official Powered Up app.`)}}t.MoveHub=l,t.PortMap={A:0,B:1,C:2,D:3,HUB_LED:50,TILT_SENSOR:58,CURRENT_SENSOR:59,VOLTAGE_SENSOR:60}},7309:function(e,t,r){"use strict";var i=this&&this.__createBinding||(Object.create?function(e,t,r,i){void 0===i&&(i=r),Object.defineProperty(e,i,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,i){void 0===i&&(i=r),e[i]=t[r]}),n=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&i(t,e,r);return n(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.PortMap=t.RemoteControl=void 0;const s=r(551),a=o(r(4312)),c=r(1227)("remotecontrol");class u extends s.LPF2Hub{static IsRemoteControl(e){return e.advertisement&&e.advertisement.serviceUuids&&e.advertisement.serviceUuids.indexOf(a.BLEService.LPF2_HUB.replace(/-/g,""))>=0&&e.advertisement.manufacturerData&&e.advertisement.manufacturerData.length>3&&e.advertisement.manufacturerData[3]===a.BLEManufacturerData.REMOTE_CONTROL_ID}constructor(e){super(e,t.PortMap,a.HubType.REMOTE_CONTROL),c("Discovered Powered UP Remote")}async connect(){c("Connecting to Powered UP Remote"),await super.connect(),c("Connect completed")}}t.RemoteControl=u,t.PortMap={LEFT:0,RIGHT:1,HUB_LED:52,VOLTAGE_SENSOR:59,REMOTE_CONTROL_RSSI:60}},8848:function(e,t,r){"use strict";var i=this&&this.__createBinding||(Object.create?function(e,t,r,i){void 0===i&&(i=r),Object.defineProperty(e,i,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,i){void 0===i&&(i=r),e[i]=t[r]}),n=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&i(t,e,r);return n(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.PortMap=t.TechnicMediumHub=void 0;const s=r(551),a=o(r(4312)),c=r(1227)("technicmediumhub");class u extends s.LPF2Hub{static IsTechnicMediumHub(e){return e.advertisement&&e.advertisement.serviceUuids&&e.advertisement.serviceUuids.indexOf(a.BLEService.LPF2_HUB.replace(/-/g,""))>=0&&e.advertisement.manufacturerData&&e.advertisement.manufacturerData.length>3&&e.advertisement.manufacturerData[3]===a.BLEManufacturerData.TECHNIC_MEDIUM_HUB}constructor(e){super(e,t.PortMap,a.HubType.TECHNIC_MEDIUM_HUB),c("Discovered Control+ Hub")}async connect(){c("Connecting to Control+ Hub"),await super.connect(),c("Connect completed")}}t.TechnicMediumHub=u,t.PortMap={A:0,B:1,C:2,D:3,HUB_LED:50,CURRENT_SENSOR:59,VOLTAGE_SENSOR:60,ACCELEROMETER:97,GYRO_SENSOR:98,TILT_SENSOR:99}},2426:function(e,t,r){"use strict";var i=r(8764).Buffer,n=this&&this.__createBinding||(Object.create?function(e,t,r,i){void 0===i&&(i=r),Object.defineProperty(e,i,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,i){void 0===i&&(i=r),e[i]=t[r]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return o(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.PortMap=t.WeDo2SmartHub=void 0;const a=r(6503),c=s(r(4312)),u=r(8593),f=r(1227)("wedo2smarthub");class l extends a.BaseHub{constructor(e){super(e,t.PortMap,c.HubType.WEDO2_SMART_HUB),this._lastTiltX=0,this._lastTiltY=0,f("Discovered WeDo 2.0 Smart Hub")}static IsWeDo2SmartHub(e){return e.advertisement&&e.advertisement.serviceUuids&&e.advertisement.serviceUuids.indexOf(c.BLEService.WEDO2_SMART_HUB.replace(/-/g,""))>=0}connect(){return new Promise((async e=>{f("Connecting to WeDo 2.0 Smart Hub"),await super.connect(),await this._bleDevice.discoverCharacteristicsForService(c.BLEService.WEDO2_SMART_HUB),await this._bleDevice.discoverCharacteristicsForService(c.BLEService.WEDO2_SMART_HUB_2),u.isWebBluetooth?(await this._bleDevice.discoverCharacteristicsForService("battery_service"),await this._bleDevice.discoverCharacteristicsForService("device_information")):(await this._bleDevice.discoverCharacteristicsForService(c.BLEService.WEDO2_SMART_HUB_3),await this._bleDevice.discoverCharacteristicsForService(c.BLEService.WEDO2_SMART_HUB_4),await this._bleDevice.discoverCharacteristicsForService(c.BLEService.WEDO2_SMART_HUB_5)),f("Connect completed"),this.emit("connect"),e(),this._bleDevice.subscribeToCharacteristic(c.BLECharacteristic.WEDO2_PORT_TYPE,this._parsePortMessage.bind(this)),this._bleDevice.subscribeToCharacteristic(c.BLECharacteristic.WEDO2_SENSOR_VALUE,this._parseSensorMessage.bind(this)),this._bleDevice.subscribeToCharacteristic(c.BLECharacteristic.WEDO2_BUTTON,this._parseSensorMessage.bind(this)),u.isWebBluetooth?(this._bleDevice.readFromCharacteristic("00002a19-0000-1000-8000-00805f9b34fb",((e,t)=>{t&&this._parseBatteryMessage(t)})),this._bleDevice.subscribeToCharacteristic("00002a19-0000-1000-8000-00805f9b34fb",this._parseHighCurrentAlert.bind(this))):(this._bleDevice.subscribeToCharacteristic(c.BLECharacteristic.WEDO2_BATTERY,this._parseBatteryMessage.bind(this)),this._bleDevice.readFromCharacteristic(c.BLECharacteristic.WEDO2_BATTERY,((e,t)=>{t&&this._parseBatteryMessage(t)}))),this._bleDevice.subscribeToCharacteristic(c.BLECharacteristic.WEDO2_HIGH_CURRENT_ALERT,this._parseHighCurrentAlert.bind(this)),u.isWebBluetooth?this._bleDevice.readFromCharacteristic("00002a26-0000-1000-8000-00805f9b34fb",((e,t)=>{t&&this._parseFirmwareRevisionString(t)})):this._bleDevice.readFromCharacteristic(c.BLECharacteristic.WEDO2_FIRMWARE_REVISION,((e,t)=>{t&&this._parseFirmwareRevisionString(t)}))}))}shutdown(){return this.send(i.from([0]),c.BLECharacteristic.WEDO2_DISCONNECT)}setName(e){if(e.length>14)throw new Error("Name must be 14 characters or less");return new Promise((t=>{const r=i.from(e,"ascii");return this.send(r,c.BLECharacteristic.WEDO2_NAME_ID),this.send(r,c.BLECharacteristic.WEDO2_NAME_ID),this._name=e,t()}))}send(e,t){return f.enabled&&f(`Sent Message (${this._getCharacteristicNameFromUUID(t)})`,e),this._bleDevice.writeToCharacteristic(t,e)}subscribe(e,t,r){this.send(i.from([1,2,e,t,r,1,0,0,0,0,1]),c.BLECharacteristic.WEDO2_PORT_TYPE_WRITE)}unsubscribe(e,t,r){this.send(i.from([1,2,e,t,r,1,0,0,0,0,0]),c.BLECharacteristic.WEDO2_PORT_TYPE_WRITE)}_getCharacteristicNameFromUUID(e){const t=Object.keys(c.BLECharacteristic);for(let r=0;r<t.length;r++){const i=t[r];if(c.BLECharacteristic[i]===e)return i}return"UNKNOWN"}_parseHighCurrentAlert(e){f("Received Message (WEDO2_HIGH_CURRENT_ALERT)",e)}_parseBatteryMessage(e){f("Received Message (WEDO2_BATTERY)",e);const t=e[0];t!==this._batteryLevel&&(this._batteryLevel=t,this.emit("batteryLevel",{batteryLevel:t}))}_parseFirmwareRevisionString(e){f("Received Message (WEDO2_FIRMWARE_REVISION)",e),this._firmwareVersion=e.toString()}_parsePortMessage(e){f("Received Message (WEDO2_PORT_TYPE)",e);const t=e[0],r=e[1],i=r?e[3]:0;if(1===r){const e=this._createDevice(i,t);this._attachDevice(e)}else if(0===r){const e=this._getDeviceByPortId(t);e&&this._detachDevice(e)}}_parseSensorMessage(e){if(f("Received Message (WEDO2_SENSOR_VALUE)",e),1===e[0])return void this.emit("button",{event:c.ButtonState.PRESSED});if(0===e[0])return void this.emit("button",{event:c.ButtonState.RELEASED});const t=e[1],r=this._getDeviceByPortId(t);r&&r.receive(e)}}t.WeDo2SmartHub=l,t.PortMap={A:1,B:2,CURRENT_SENSOR:3,VOLTAGE_SENSOR:4,PIEZO_BUZZER:5,HUB_LED:6}},389:function(e,t,r){"use strict";var i=this&&this.__createBinding||(Object.create?function(e,t,r,i){void 0===i&&(i=r),Object.defineProperty(e,i,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,i){void 0===i&&(i=r),e[i]=t[r]}),n=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&i(t,e,r);return n(t,e),t};Object.defineProperty(t,"__esModule",{value:!0});const s=o(r(4312)),a=r(9804),c=r(6503),u=r(5688),f=r(8647),l=r(9279),_=r(9556),h=r(7309),d=r(8848),p=r(2426),E=r(9126),O=r(4499),T=r(5468),b=r(1718),M=r(9539),v=r(6758),y=r(1668),R=r(783),m=r(3677),S=r(7375),A=r(7201),I=r(4772),L=r(6227),D=r(222),g=r(3387),C=r(3652),N=r(6481),P=r(6147),B=r(2826),U=r(2667),w=r(1665),H=r(3841),F=r(4321),j=r(8425),W=r(2644),G=r(6121),x=r(8762),V=r(8036),Y=r(9257),k=r(9847),$=r(9045),K=r(2897),z=r(8593);window.PoweredUP={PoweredUP:a.PoweredUP,BaseHub:c.BaseHub,WeDo2SmartHub:p.WeDo2SmartHub,TechnicMediumHub:d.TechnicMediumHub,Hub:f.Hub,RemoteControl:h.RemoteControl,DuploTrainBase:u.DuploTrainBase,Consts:s,ColorDistanceSensor:E.ColorDistanceSensor,Device:T.Device,DuploTrainBaseColorSensor:b.DuploTrainBaseColorSensor,DuploTrainBaseMotor:M.DuploTrainBaseMotor,DuploTrainBaseSpeaker:v.DuploTrainBaseSpeaker,DuploTrainBaseSpeedometer:y.DuploTrainBaseSpeedometer,HubLED:R.HubLED,Light:m.Light,Mario:l.Mario,MediumLinearMotor:S.MediumLinearMotor,MotionSensor:A.MotionSensor,MoveHub:_.MoveHub,MoveHubMediumLinearMotor:I.MoveHubMediumLinearMotor,MoveHubTiltSensor:L.MoveHubTiltSensor,PiezoBuzzer:D.PiezoBuzzer,RemoteControlButton:g.RemoteControlButton,SimpleMediumLinearMotor:C.SimpleMediumLinearMotor,TechnicColorSensor:N.TechnicColorSensor,TechnicDistanceSensor:P.TechnicDistanceSensor,TechnicForceSensor:B.TechnicForceSensor,TechnicMediumHubAccelerometerSensor:F.TechnicMediumHubAccelerometerSensor,TechnicMediumHubGyroSensor:j.TechnicMediumHubGyroSensor,TechnicMediumHubTiltSensor:W.TechnicMediumHubTiltSensor,TechnicMediumAngularMotor:H.TechnicMediumAngularMotor,TechnicLargeAngularMotor:U.TechnicLargeAngularMotor,TechnicLargeLinearMotor:w.TechnicLargeLinearMotor,TechnicXLargeLinearMotor:G.TechnicXLargeLinearMotor,TiltSensor:x.TiltSensor,TrainMotor:V.TrainMotor,VoltageSensor:Y.VoltageSensor,CurrentSensor:O.CurrentSensor,TachoMotor:k.TachoMotor,AbsoluteMotor:$.AbsoluteMotor,BasicMotor:K.BasicMotor,isWebBluetooth:z.isWebBluetooth}},9804:function(e,t,r){"use strict";var i=r(8764).Buffer,n=this&&this.__createBinding||(Object.create?function(e,t,r,i){void 0===i&&(i=r),Object.defineProperty(e,i,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,i){void 0===i&&(i=r),e[i]=t[r]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return o(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.PoweredUP=void 0;const a=r(6165),c=r(5688),u=r(8647),f=r(9279),l=r(9556),_=r(7309),h=r(8848),d=r(2426),p=s(r(4312)),E=r(7187),O=r(1227)("poweredup");class T extends E.EventEmitter{constructor(){super(),this._connectedHubs={},this._discoveryEventHandler=this._discoveryEventHandler.bind(this)}async scan(){try{const e=await navigator.bluetooth.requestDevice({filters:[{services:[p.BLEService.WEDO2_SMART_HUB]},{services:[p.BLEService.LPF2_HUB]}],optionalServices:[p.BLEService.WEDO2_SMART_HUB_2,"battery_service","device_information"]}),t=await e.gatt.connect();return this._discoveryEventHandler.call(this,t),!0}catch(e){return!1}}getHubs(){return Object.values(this._connectedHubs)}getHubByUUID(e){return this._connectedHubs[e]}getHubByPrimaryMACAddress(e){return Object.values(this._connectedHubs).filter((t=>t.primaryMACAddress===e))[0]}getHubsByName(e){return Object.values(this._connectedHubs).filter((t=>t.name===e))}getHubsByType(e){return Object.values(this._connectedHubs).filter((t=>t.type===e))}_determineLPF2HubType(e){return new Promise((t=>{let r=i.alloc(0);e.subscribeToCharacteristic(p.BLECharacteristic.LPF2_ALL,(n=>{for(r=i.concat([r,n]);r[0]<=r.length;){const i=r[0],n=r.slice(0,i);if(r=r.slice(i),1===n[2]&&11===n[3]){switch(n[5]){case p.BLEManufacturerData.REMOTE_CONTROL_ID:t(p.HubType.REMOTE_CONTROL);break;case p.BLEManufacturerData.MOVE_HUB_ID:t(p.HubType.MOVE_HUB);break;case p.BLEManufacturerData.HUB_ID:t(p.HubType.HUB);break;case p.BLEManufacturerData.DUPLO_TRAIN_BASE_ID:t(p.HubType.DUPLO_TRAIN_BASE);break;case p.BLEManufacturerData.TECHNIC_MEDIUM_HUB:t(p.HubType.TECHNIC_MEDIUM_HUB)}O("Hub type determined")}else O("Stashed in mailbox (LPF2_ALL)",n),e.addToCharacteristicMailbox(p.BLECharacteristic.LPF2_ALL,n)}})),e.writeToCharacteristic(p.BLECharacteristic.LPF2_ALL,i.from([5,0,1,11,5]))}))}async _discoveryEventHandler(e){const t=new a.WebBLEDevice(e);let r,i=p.HubType.UNKNOWN,n=!1;try{await t.discoverCharacteristicsForService(p.BLEService.WEDO2_SMART_HUB),i=p.HubType.WEDO2_SMART_HUB}catch(e){}try{i!==p.HubType.WEDO2_SMART_HUB&&(await t.discoverCharacteristicsForService(p.BLEService.LPF2_HUB),n=!0)}catch(e){}switch(n&&(i=await this._determineLPF2HubType(t)),i){case p.HubType.WEDO2_SMART_HUB:r=new d.WeDo2SmartHub(t);break;case p.HubType.MOVE_HUB:r=new l.MoveHub(t);break;case p.HubType.HUB:r=new u.Hub(t);break;case p.HubType.REMOTE_CONTROL:r=new _.RemoteControl(t);break;case p.HubType.DUPLO_TRAIN_BASE:r=new c.DuploTrainBase(t);break;case p.HubType.TECHNIC_MEDIUM_HUB:r=new h.TechnicMediumHub(t);break;case p.HubType.MARIO:r=new f.Mario(t);break;default:return}t.on("discoverComplete",(()=>{r.on("connect",(()=>{O(`Hub ${r.uuid} connected`),this._connectedHubs[r.uuid]=r})),r.on("disconnect",(()=>{O(`Hub ${r.uuid} disconnected`),delete this._connectedHubs[r.uuid]})),O(`Hub ${r.uuid} discovered`),this.emit("discover",r)}))}}t.PoweredUP=T},8593:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.calculateRamp=t.roundAngleToNearest90=t.normalizeAngle=t.decodeMACAddress=t.decodeVersion=t.mapSpeed=t.toBin=t.toHex=t.isWebBluetooth=void 0;const i=r(7187);t.isWebBluetooth=!("undefined"==typeof navigator||!navigator||!navigator.bluetooth),t.toHex=(e,t=2)=>e.toString(16).padStart(t,"0"),t.toBin=(e,t=8)=>e.toString(2).padStart(t,"0"),t.mapSpeed=e=>127===e?127:(e>100?e=100:e<-100&&(e=-100),e),t.decodeVersion=e=>{const t=e.toString(16).padStart(8,"0");return[t[0],t[1],t.substring(2,4),t.substring(4)].join(".")},t.decodeMACAddress=e=>Array.from(e).map((e=>t.toHex(e,2))).join(":"),t.normalizeAngle=e=>e>=180?e-(e+180)/360*360:e<-180?e+(180-e)/360*360:e,t.roundAngleToNearest90=e=>(e=t.normalizeAngle(e))<-135?-180:e<-45?-90:e<45?0:e<135?90:-180,t.calculateRamp=(e,t,r,n)=>{const o=new i.EventEmitter,s=Math.abs(r-t);let a=n/s,c=1;a<50&&s>0&&(c=50/a,a=50),t>r&&(c=-c);let u=0;const f=setInterval((()=>{let e=Math.round(t+ ++u*c);(r>t&&e>r||t>r&&e<r)&&(e=r),o.emit("changePower",e),e===r&&(clearInterval(f),o.emit("finished"))}),a);return e.setEventTimer(f),o}},6165:(e,t,r)=>{"use strict";var i=r(8764).Buffer;Object.defineProperty(t,"__esModule",{value:!0}),t.WebBLEDevice=void 0;const n=r(1227),o=r(7187),s=n("bledevice");class a extends o.EventEmitter{constructor(e){super(),this._name="",this._listeners={},this._characteristics={},this._queue=Promise.resolve(),this._mailbox=[],this._connected=!1,this._connecting=!1,this._webBLEServer=e,this._uuid=e.device.id,this._name=e.device.name,e.device.addEventListener("gattserverdisconnected",(()=>{this._connecting=!1,this._connected=!1,this.emit("disconnect")})),setTimeout((()=>{this.emit("discoverComplete")}),2e3)}get uuid(){return this._uuid}get name(){return this._name}get connecting(){return this._connecting}get connected(){return this._connected}connect(){return new Promise((e=>(this._connected=!0,e())))}disconnect(){return new Promise((e=>(this._webBLEServer.device.gatt.disconnect(),e())))}async discoverCharacteristicsForService(e){s("Service/characteristic discovery started");const t=await this._webBLEServer.getPrimaryService(e),r=await t.getCharacteristics();for(const e of r)this._characteristics[e.uuid]=e;s("Service/characteristic discovery finished")}subscribeToCharacteristic(e,t){this._listeners[e]&&this._characteristics[e].removeEventListener("characteristicvaluechanged",this._listeners[e]),this._listeners[e]=e=>{const r=i.alloc(e.target.value.buffer.byteLength),n=new Uint8Array(e.target.value.buffer);for(let e=0;e<r.length;e++)r[e]=n[e];return s("Incoming data",r),t(r)},this._characteristics[e].addEventListener("characteristicvaluechanged",this._listeners[e]);const r=Array.from(this._mailbox);this._mailbox=[];for(const e of r)s("Replayed from mailbox (LPF2_ALL)",e),t(e);this._characteristics[e].startNotifications()}addToCharacteristicMailbox(e,t){this._mailbox.push(t)}readFromCharacteristic(e,t){this._characteristics[e].readValue().then((e=>{const r=i.alloc(e.buffer.byteLength),n=new Uint8Array(e.buffer);for(let e=0;e<r.length;e++)r[e]=n[e];t(null,r)}))}writeToCharacteristic(e,t){return this._queue=this._queue.then((()=>this._characteristics[e].writeValueWithoutResponse(t)))}_sanitizeUUID(e){return e.replace(/-/g,"")}}t.WebBLEDevice=a}},t={};function r(i){var n=t[i];if(void 0!==n)return n.exports;var o=t[i]={exports:{}};return e[i].call(o.exports,o,o.exports,r),o.exports}r.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),r(389)})();
//# sourceMappingURL=poweredup.js.map